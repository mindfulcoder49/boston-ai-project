import{A as E}from"./AdminLayout-1b49a627.js";import F from"./EditMapModal-19a108a5.js";import{Q as j,m as b,o as r,c as v,w as h,a as x,u as g,Z as T,b as t,f as w,i as k,d as n,t as l,e as d,F as y,j as _,n as c,p as u}from"./app-59f66305.js";import"./NavLink-5e46c6e3.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"container mx-auto"},V={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-2"},H={key:0,class:"mb-4 p-4 bg-green-100 text-green-700 rounded-md"},O={key:1,class:"mb-4 p-4 bg-red-100 text-red-700 rounded-md"},P={key:2,class:"space-y-4"},U={class:"mb-3"},J=["href","title"],z=["title"],I={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm mb-3"},Q=["title"],Z={class:"text-gray-500"},q={class:"text-xs text-gray-500"},G={class:"text-xs space-y-0.5 mt-0.5"},K={class:"text-gray-800"},R={class:"text-gray-800"},W={class:"mt-4 flex flex-col space-y-2 sm:flex-row sm:flex-wrap sm:space-y-0 sm:gap-2"},X=["onClick"],Y=["onClick"],ee=["onClick"],te=["onClick"],se=["onClick"],oe=["onClick"],re={key:3,class:"bg-white shadow-md rounded-lg p-6 text-center"},ne={key:4,class:"mt-6 flex justify-center"},le={class:"flex flex-wrap -mb-1"},ae=["innerHTML"],fe={__name:"ManageMaps",props:{maps:Object},setup(i){const m=j(),p=b(!1),f=b(null),M=s=>s?new Date(s).toLocaleString():"N/A",C=s=>{f.value=JSON.parse(JSON.stringify(s)),p.value=!0},$=()=>{p.value=!1,f.value=null},A=s=>{confirm("Are you sure you want to approve this map for public viewing?")&&u.post(route("admin.maps.approve",s),{},{preserveScroll:!0})},N=s=>{confirm("Are you sure you want to unapprove this map? It will no longer be publicly visible and will be unfeatured.")&&u.post(route("admin.maps.unapprove",s),{},{preserveScroll:!0})},S=s=>{confirm("Are you sure you want to feature this map?")&&u.post(route("admin.maps.feature",s),{},{preserveScroll:!0})},L=s=>{confirm("Are you sure you want to unfeature this map?")&&u.post(route("admin.maps.unfeature",s),{},{preserveScroll:!0})},D=s=>{confirm(`Are you sure you want to delete the map "${s.name}"? This action cannot be undone.`)&&u.delete(route("admin.maps.destroy",s.id),{preserveScroll:!0,onSuccess:()=>m.props.flash.success=`Map "${s.name}" deleted successfully.`,onError:o=>m.props.flash.error=Object.values(o).join(" ")||"Failed to delete map."})};return(s,o)=>(r(),v(E,null,{default:h(()=>[x(g(T),{title:"Admin - Manage Maps"}),t("div",B,[t("div",V,[o[1]||(o[1]=t("h1",{class:"text-2xl font-semibold text-gray-800"},"Manage All Maps",-1)),x(g(k),{href:s.route("admin.index"),class:"text-sm text-indigo-600 hover:text-indigo-800 self-end sm:self-center"},{default:h(()=>o[0]||(o[0]=[w("â† Back to Admin Dashboard")])),_:1,__:[0]},8,["href"])]),s.$page.props.flash.success?(r(),n("div",H,l(s.$page.props.flash.success),1)):d("",!0),s.$page.props.flash.error?(r(),n("div",O,l(s.$page.props.flash.error),1)):d("",!0),i.maps.data&&i.maps.data.length>0?(r(),n("div",P,[(r(!0),n(y,null,_(i.maps.data,e=>(r(),n("div",{key:e.id,class:"bg-white shadow-md rounded-lg p-4"},[t("div",U,[t("a",{href:e.view_url,target:"_blank",class:"text-lg font-semibold text-indigo-700 hover:underline truncate block",title:e.name},l(e.name),9,J),t("p",{class:"text-xs text-gray-500 truncate",title:e.description},l(e.description||"No description"),9,z)]),t("div",I,[t("div",null,[o[2]||(o[2]=t("strong",{class:"text-gray-600"},"Creator:",-1)),t("p",{class:"text-gray-800 truncate",title:`${e.user_name} (${e.user_email})`},[w(l(e.user_name)+" ",1),t("span",Z,"("+l(e.user_email)+")",1)],8,Q),t("p",q,"Display: "+l(e.creator_display_name||"(Not set)"),1)]),t("div",null,[o[3]||(o[3]=t("strong",{class:"text-gray-600"},"Status:",-1)),t("div",G,[t("span",{class:c([e.is_public?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-0.5 inline-flex font-semibold rounded-full"])},l(e.is_public?"Public":"Private"),3),t("span",{class:c([e.is_approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","ml-1 px-2 py-0.5 inline-flex font-semibold rounded-full"])},l(e.is_approved?"Approved":"Pending"),3),t("span",{class:c([e.is_featured?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800","ml-1 px-2 py-0.5 inline-flex font-semibold rounded-full"])},l(e.is_featured?"Featured":"Not Featured"),3)])]),t("div",null,[o[4]||(o[4]=t("strong",{class:"text-gray-600"},"Last Updated:",-1)),t("p",K,l(M(e.updated_at)),1)]),t("div",null,[o[5]||(o[5]=t("strong",{class:"text-gray-600"},"Views:",-1)),t("p",R,l(e.view_count),1)])]),t("div",W,[t("button",{onClick:a=>C(e),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700"},"Edit",8,X),!e.is_approved&&e.is_public?(r(),n("button",{key:0,onClick:a=>A(e.id),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-green-500 rounded-md hover:bg-green-600"},"Approve",8,Y)):d("",!0),e.is_approved?(r(),n("button",{key:1,onClick:a=>N(e.id),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-yellow-500 rounded-md hover:bg-yellow-600"},"Unapprove",8,ee)):d("",!0),e.is_public&&e.is_approved&&!e.is_featured?(r(),n("button",{key:2,onClick:a=>S(e.id),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-purple-500 rounded-md hover:bg-purple-600"},"Feature",8,te)):d("",!0),e.is_featured?(r(),n("button",{key:3,onClick:a=>L(e.id),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-gray-600 rounded-md hover:bg-gray-700"},"Unfeature",8,se)):d("",!0),t("button",{onClick:a=>D(e),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700"},"Delete",8,oe)])]))),128))])):(r(),n("div",re,o[6]||(o[6]=[t("p",{class:"text-gray-500"},"No maps found.",-1)]))),i.maps.links.length>3?(r(),n("div",ne,[t("div",le,[(r(!0),n(y,null,_(i.maps.links,(e,a)=>(r(),n(y,{key:a},[e.url===null?(r(),n("div",{key:0,class:"mr-1 mb-1 px-3 py-2 sm:px-4 sm:py-3 text-xs sm:text-sm leading-4 text-gray-400 border rounded",innerHTML:e.label},null,8,ae)):(r(),v(g(k),{key:1,class:c(["mr-1 mb-1 px-3 py-2 sm:px-4 sm:py-3 text-xs sm:text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-white":e.active}]),href:e.url,innerHTML:e.label},null,8,["class","href","innerHTML"]))],64))),128))])])):d("",!0)]),x(F,{show:p.value,map_data:f.value,onClose:$},null,8,["show","map_data"])]),_:1}))}};export{fe as default};
