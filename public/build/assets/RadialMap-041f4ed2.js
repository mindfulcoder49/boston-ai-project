import{o as s,f as r,b as e,d as u,t as n,g as v,r as w,i as j,k as q,F as M,l as O,c as P,y as Q,z as K,I as V,m as y,s as se,p as le,x as ie,n as z,Z as re,j as ce,h as J,T as de,w as Y,a as $,e as ue}from"./app-f022cefe.js";import{B as _e,A as ge}from"./AiAssistant-83420726.js";import{P as he}from"./PageTemplate-761bbc60.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import"./GuestLayout-d46d9dff.js";import"./ResponsiveNavLink-5c6d3389.js";import"./AuthenticatedLayout-bc793430.js";const me={key:0,class:"p-4 bg-gray-100 rounded-lg shadow"},fe=e("h2",{class:"text-xl font-bold text-gray-800"},"311 Case",-1),ye={class:"text-gray-700 mb-4"},xe=e("strong",null,"Date:",-1),ve={class:"space-y-2"},be=e("strong",null,"Case ID:",-1),we=e("strong",null,"Status:",-1),pe=e("strong",null,"Title:",-1),De=e("strong",null,"Reason:",-1),Pe=e("strong",null,"Subject:",-1),Ce=e("strong",null,"Location:",-1),Se=e("strong",null,"Neighborhood:",-1),Le=e("strong",null,"Source:",-1),ke=e("strong",null,"Department:",-1),Ae=e("strong",null,"Closure Date:",-1),W={__name:"ServiceCase",props:{data:{type:Object,required:!0}},setup(t){function o(l){return l?new Date(l).toLocaleString():"N/A"}return(l,a)=>t.data?(s(),r("div",me,[fe,e("p",ye,[xe,u(" "+n(new Date(t.data.date).toLocaleString()),1)]),e("ul",ve,[e("li",null,[be,u(" "+n(t.data.info.case_enquiry_id),1)]),e("li",null,[we,u(" "+n(t.data.info.case_status),1)]),e("li",null,[pe,u(" "+n(t.data.info.case_title),1)]),e("li",null,[De,u(" "+n(t.data.info.reason),1)]),e("li",null,[Pe,u(" "+n(t.data.info.subject),1)]),e("li",null,[Ce,u(" "+n(t.data.info.location),1)]),e("li",null,[Se,u(" "+n(t.data.info.neighborhood),1)]),e("li",null,[Le,u(" "+n(t.data.info.source),1)]),e("li",null,[ke,u(" "+n(t.data.info.department),1)]),e("li",null,[Ae,u(" "+n(o(t.data.info.closed_dt)),1)])])])):v("",!0)}},Me={key:0,class:"p-4 bg-gray-100 rounded-lg shadow"},Oe=e("h2",{class:"text-xl font-bold text-gray-800"},"Crime Report",-1),Ne={class:"text-gray-700 mb-4"},$e=e("strong",null,"Date:",-1),je={class:"space-y-2"},Te=e("strong",null,"Incident Number:",-1),Ie=e("strong",null,"Offense:",-1),Be=e("strong",null,"Category:",-1),Fe=e("strong",null,"District:",-1),Ve=e("strong",null,"Street:",-1),qe=e("strong",null,"Day:",-1),Ee=e("strong",null,"Time:",-1),Z={__name:"Crime",props:{data:{type:Object,required:!0}},setup(t){function o(l){const a=new Date;return a.setHours(l,0,0),a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}return(l,a)=>t.data?(s(),r("div",Me,[Oe,e("p",Ne,[$e,u(" "+n(new Date(t.data.date).toLocaleString()),1)]),e("ul",je,[e("li",null,[Te,u(" "+n(t.data.info.incident_number),1)]),e("li",null,[Ie,u(" "+n(t.data.info.offense_description),1)]),e("li",null,[Be,u(" "+n(t.data.info.offense_category),1)]),e("li",null,[Fe,u(" "+n(t.data.info.district),1)]),e("li",null,[Ve,u(" "+n(t.data.info.street),1)]),e("li",null,[qe,u(" "+n(t.data.info.day_of_week),1)]),e("li",null,[Ee,u(" "+n(o(t.data.info.hour)),1)])])])):v("",!0)}},Qe={key:0,class:"p-4 bg-gray-100 rounded-lg shadow"},Ke=e("h2",{class:"text-xl font-bold text-gray-800"},"Building Permit",-1),Ue={class:"text-gray-700 mb-4"},He=e("strong",null,"Date:",-1),Re={class:"space-y-2"},Ge=e("strong",null,"Permit Number:",-1),Je=e("strong",null,"Work Type:",-1),Ye=e("strong",null,"Description:",-1),ze=e("strong",null,"Status:",-1),We=e("strong",null,"Declared Value:",-1),Ze=e("strong",null,"Total Fees:",-1),Xe=e("strong",null,"Expiration Date:",-1),et=e("strong",null,"Address:",-1),X={__name:"BuildingPermit",props:{data:{type:Object,required:!0}},setup(t){function o(l){return l?new Date(l).toLocaleString():"N/A"}return(l,a)=>t.data?(s(),r("div",Qe,[Ke,e("p",Ue,[He,u(" "+n(new Date(t.data.date).toLocaleString()),1)]),e("ul",Re,[e("li",null,[Ge,u(" "+n(t.data.info.permitnumber),1)]),e("li",null,[Je,u(" "+n(t.data.info.worktype),1)]),e("li",null,[Ye,u(" "+n(t.data.info.description),1)]),e("li",null,[ze,u(" "+n(t.data.info.status),1)]),e("li",null,[We,u(" "+n(t.data.info.declared_valuation),1)]),e("li",null,[Ze,u(" "+n(t.data.info.total_fees),1)]),e("li",null,[Xe,u(" "+n(o(t.data.info.expiration_date)),1)]),e("li",null,[et,u(" "+n(t.data.info.address)+", "+n(t.data.info.city)+", "+n(t.data.info.state)+" "+n(t.data.info.zip),1)])])])):v("",!0)}};const tt={name:"GenericDataList",components:{ServiceCase:W,Crime:Z,BuildingPermit:X},props:{totalData:{type:Array,required:!0},itemsPerPage:{type:Number,default:10}},data(){return{currentPage:1,inputPage:1,sortKey:"date",sortOrder:"desc"}},computed:{totalPages(){return Math.ceil(this.totalData.length/this.itemsPerPage)},sortedData(){return[...this.totalData].sort((t,o)=>{let l=0;return t[this.sortKey]<o[this.sortKey]?l=-1:t[this.sortKey]>o[this.sortKey]&&(l=1),this.sortOrder==="asc"?l:-l})},paginatedData(){const t=(this.currentPage-1)*this.itemsPerPage,o=t+this.itemsPerPage;return this.sortedData.slice(t,o)}},watch:{currentPage(t){this.inputPage=t}},methods:{nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},goToPage(){this.inputPage>=1&&this.inputPage<=this.totalPages?this.currentPage=this.inputPage:this.inputPage=this.currentPage},sortBy(t){this.sortKey===t?this.sortOrder=this.sortOrder==="asc"?"desc":"asc":(this.sortKey=t,this.sortOrder="desc")}}},at=t=>(Q("data-v-a9d92933"),t=t(),K(),t),ot={class:"flex justify-between items-center mt-4 mb-4"},nt=["disabled"],st={class:"flex items-center"},lt=at(()=>e("span",{class:"mr-2"},"Page",-1)),it=["max"],rt={class:"ml-2"},ct=["disabled"],dt={key:0,class:"text-center text-gray-500"},ut={key:1,class:"space-y-4"};function _t(t,o,l,a,_,i){const d=w("ServiceCase"),h=w("Crime"),x=w("BuildingPermit");return s(),r("div",null,[e("div",ot,[e("button",{onClick:o[0]||(o[0]=(...g)=>i.prevPage&&i.prevPage(...g)),disabled:_.currentPage===1,class:"p-2 bg-blue-500 text-white rounded-lg shadow-lg hover:bg-blue-600 w-1/4 sm:w-1/6 disabled:bg-gray-300"}," Previous ",8,nt),e("div",st,[lt,j(e("input",{"onUpdate:modelValue":o[1]||(o[1]=g=>_.inputPage=g),onChange:o[2]||(o[2]=(...g)=>i.goToPage&&i.goToPage(...g)),type:"number",min:"1",max:i.totalPages,class:"w-16 p-1 border rounded-md text-center"},null,40,it),[[q,_.inputPage,void 0,{number:!0}]]),e("span",rt,"of "+n(i.totalPages),1)]),e("button",{onClick:o[3]||(o[3]=(...g)=>i.nextPage&&i.nextPage(...g)),disabled:_.currentPage===i.totalPages,class:"p-2 bg-blue-500 text-white rounded-lg shadow-lg hover:bg-blue-600 w-1/4 sm:w-1/6 disabled:bg-gray-300"}," Next ",8,ct)]),i.paginatedData.length===0?(s(),r("div",dt," No results found ")):(s(),r("div",ut,[(s(!0),r(M,null,O(i.paginatedData,(g,p)=>(s(),r("div",{key:p,class:"p-4 bg-gray-100 rounded-lg shadow"},[g.type==="311 Case"?(s(),P(d,{key:0,data:g},null,8,["data"])):v("",!0),g.type==="Crime"?(s(),P(h,{key:1,data:g},null,8,["data"])):v("",!0),g.type==="Building Permit"?(s(),P(x,{key:2,data:g},null,8,["data"])):v("",!0)]))),128))]))])}const gt=T(tt,[["render",_t],["__scopeId","data-v-a9d92933"]]);const ht={name:"JsonTree",props:{json:{type:Object,required:!0}},data(){return{collapsed:{}}},methods:{isObjectOrArray(t){return typeof t=="object"&&t!==null},formatValue(t){return typeof t=="string"?`"${t}"`:t},toggleCollapse(t){this.collapsed[t]=!this.collapsed[t]}}},mt={class:"json-tree"},ft={class:"list-none pl-5"},yt=["onClick"],xt={key:0,class:"text-blue-500"},vt={key:1,class:"text-gray-700"},bt={key:0,class:"ml-5"};function wt(t,o,l,a,_,i){const d=w("JsonTree",!0);return s(),r("div",mt,[e("ul",ft,[(s(!0),r(M,null,O(l.json,(h,x)=>(s(),r("li",{key:x,class:""},[e("span",{onClick:g=>i.toggleCollapse(x),class:"cursor-pointer font-semibold"},[u(n(x)+": ",1),i.isObjectOrArray(h)?(s(),r("span",xt," ["+n(_.collapsed[x]?"...":Array.isArray(h)?"Array":"Object")+"] ",1)):(s(),r("span",vt,n(i.formatValue(h)),1))],8,yt),!_.collapsed[x]&&i.isObjectOrArray(h)?(s(),r("div",bt,[i.isObjectOrArray(h)?(s(),P(d,{key:0,json:h},null,8,["json"])):v("",!0)])):v("",!0)]))),128))])])}const pt=T(ht,[["render",wt],["__scopeId","data-v-0ca97707"]]);const Dt={props:["initialSearchQuery"],data(){return{searchQuery:this.initialSearchQuery||"",results:[]}},methods:{async searchAddresses(){if(this.searchQuery.length>=3)try{const t=await V.get("/search-address",{params:{address:this.searchQuery}});this.results=t.data.data}catch(t){console.error("Error fetching address data:",t)}else this.results=[]},selectAddress(t){const o={lat:t.y_coord,lng:t.x_coord,address:t.full_address};this.$emit("address-selected",o)}}},Pt={key:0,class:"mt-2 border rounded p-2 bg-white shadow"},Ct=["onClick"],St={key:1,class:"text-gray-500 mt-2"};function Lt(t,o,l,a,_,i){return s(),r("div",null,[j(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=d=>_.searchQuery=d),onInput:o[1]||(o[1]=(...d)=>i.searchAddresses&&i.searchAddresses(...d)),placeholder:"Enter address",class:"border p-2 rounded w-full"},null,544),[[q,_.searchQuery]]),_.results.length?(s(),r("ul",Pt,[(s(!0),r(M,null,O(_.results,(d,h)=>(s(),r("li",{key:h,onClick:x=>i.selectAddress(d),class:"cursor-pointer hover:bg-gray-100 p-2 rounded"},n(d.full_address)+" - ("+n(d.x_coord)+", "+n(d.y_coord)+") ",9,Ct))),128))])):v("",!0),!_.results.length&&_.searchQuery?(s(),r("p",St,"No results found.")):v("",!0)])}const kt=T(Dt,[["render",Lt],["__scopeId","data-v-ce44ea29"]]),At={key:0,class:"p-4 bg-gray-100 rounded-lg shadow"},Mt={class:"text-xl font-bold text-gray-800"},Ot={class:"text-gray-700"},Nt=e("strong",null,"Date:",-1),$t={__name:"DataPointDetails",props:{dataPoint:{type:Object,required:!1,default:null}},setup(t){return(o,l)=>t.dataPoint?(s(),r("div",At,[e("h2",Mt,n(t.dataPoint.type),1),e("p",Ot,[Nt,u(" "+n(new Date(t.dataPoint.date).toLocaleString()),1)]),e("ul",null,[(s(!0),r(M,null,O(t.dataPoint.info,(a,_)=>(s(),r("li",{key:_},[e("strong",null,n(_)+":",1),u(" "+n(a),1)]))),128))])])):v("",!0)}};const jt={name:"SaveLocation",props:{location:{type:Object,required:!0}},emits:["load-location"],setup(t,{emit:o}){const l=y("home"),a=y(!1),_=y(!1),i=y([]),d=async()=>{try{const m=await V.get("/locations");i.value=m.data,h()}catch(m){console.error("Error fetching locations:",m)}},h=()=>{a.value=i.value.some(m=>m.latitude===t.location.latitude&&m.longitude===t.location.longitude)},x=async()=>{if(!(a.value||_.value)){_.value=!0;try{const m={name:l.value,latitude:t.location.latitude,longitude:t.location.longitude,address:t.location.address||null},D=await V.post("/locations",m);i.value.push(D.data),a.value=!0,_.value=!1}catch(m){console.error("Error saving location:",m),_.value=!1}}},g=async m=>{try{await V.delete(`/locations/${m}`),i.value=i.value.filter(D=>D.id!==m),h()}catch(D){console.error("Error deleting location:",D)}},p=m=>{o("load-location",m)};return se(()=>t.location,h),le(d),{selectedName:l,isSaved:a,saving:_,saveLocation:x,deleteLocation:g,emitLocation:p,userLocations:i}}},A=t=>(Q("data-v-a3f97cea"),t=t(),K(),t),Tt={class:"p-4 bg-gray-100 rounded-lg shadow-md"},It=A(()=>e("h3",{class:"text-lg font-bold text-gray-800"},"Manage Locations",-1)),Bt={class:"mt-4"},Ft=A(()=>e("h4",{class:"text-md font-semibold text-gray-800"},"Current Location",-1)),Vt={class:"flex flex-wrap items-center gap-2"},qt={class:"text-gray-700"},Et={class:"text-gray-700"},Qt={key:0,class:"text-gray-700"},Kt={class:"mt-2 flex flex-wrap items-center gap-2"},Ut=A(()=>e("label",{for:"location-name",class:"text-sm font-medium text-gray-700"}," Location Name ",-1)),Ht=A(()=>e("option",{value:"home"},"Home",-1)),Rt=A(()=>e("option",{value:"work"},"Work",-1)),Gt=A(()=>e("option",{value:"other"},"Other",-1)),Jt=[Ht,Rt,Gt],Yt=["disabled"],zt={class:"mt-4"},Wt=A(()=>e("h4",{class:"text-md font-semibold text-gray-800"},"Saved Locations",-1)),Zt={key:0,class:"mt-2 border rounded p-2 bg-white shadow"},Xt={class:"flex flex-wrap items-center gap-2 pr-5"},ea={class:"font-bold"},ta={class:"text-sm text-gray-600"},aa={class:"text-sm text-gray-600"},oa={key:0,class:"text-sm text-gray-600"},na={class:"flex space-x-2 mt-2 md:mt-0"},sa=["onClick"],la=["onClick"],ia={key:1,class:"text-gray-500 mt-2"};function ra(t,o,l,a,_,i){return s(),r("div",Tt,[It,e("div",Bt,[Ft,e("div",Vt,[e("p",qt,"Lat: "+n(l.location.latitude),1),e("p",Et,"Lng: "+n(l.location.longitude),1),l.location.address?(s(),r("p",Qt,"Address: "+n(l.location.address),1)):v("",!0)]),e("div",Kt,[Ut,j(e("select",{id:"location-name","onUpdate:modelValue":o[0]||(o[0]=d=>a.selectedName=d),class:"px-2 py-1 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},Jt,512),[[ie,a.selectedName]]),e("button",{disabled:a.isSaved||a.saving,onClick:o[1]||(o[1]=(...d)=>a.saveLocation&&a.saveLocation(...d)),class:z(["px-4 py-2 text-white rounded-lg shadow-lg transition-colors",a.isSaved?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600"])},n(a.isSaved?"Location Saved":a.saving?"Saving...":"Save Location"),11,Yt)])]),e("div",zt,[Wt,a.userLocations.length?(s(),r("ul",Zt,[(s(!0),r(M,null,O(a.userLocations,(d,h)=>(s(),r("li",{key:d.id,class:"flex flex-wrap items-center justify-between p-2 border-b last:border-none"},[e("div",Xt,[e("p",ea,n(d.name),1),e("p",ta,"Lat: "+n(d.latitude),1),e("p",aa,"Lng: "+n(d.longitude),1),d.address?(s(),r("p",oa," Address: "+n(d.address),1)):v("",!0)]),e("div",na,[e("button",{onClick:x=>a.emitLocation(d),class:"px-2 py-1 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600"}," Load ",8,sa),e("button",{onClick:x=>a.deleteLocation(d.id),class:"px-2 py-1 bg-red-500 text-white rounded-md shadow hover:bg-red-600"}," Delete ",8,la)])]))),128))])):(s(),r("p",ia,"No saved locations found"))])])}const ca=T(jt,[["render",ra],["__scopeId","data-v-a3f97cea"]]);const da={name:"RadialMap",components:{BostonMap:_e,PageTemplate:he,AiAssistant:ge,GenericDataList:gt,JsonTree:pt,AddressSearch:kt,Head:re,Link:ce,DataPointDetails:$t,SaveLocation:ca,ServiceCase:W,Crime:Z,BuildingPermit:X},props:["dataPoints","centralLocation","auth","codes"],setup(t){const o=y({}),l=y(!1),a=y(!1),_=y(null),i=y(null),d=y([t.centralLocation.latitude,t.centralLocation.longitude]),h=y(!1),x=y(!0),g=y(""),p=y(""),m=y(""),D=y(0),I=y(!0),B=y(null),E=J(()=>{var c;return!!((c=t.auth)!=null&&c.user)}),f=c=>{B.value=c},S=y(0);if(t.dataPoints.length>0){const c=t.dataPoints.map(k=>new Date(k.date));p.value=c.reduce((k,N)=>k<N?k:N).toISOString().split("T")[0],m.value=c.reduce((k,N)=>k>N?k:N).toISOString().split("T")[0],g.value=p.value;const b=new Date(p.value),F=new Date(m.value);S.value=Math.ceil((F-b)/(1e3*60*60*24))}const U=()=>{const c=new Date(p.value),b=new Date(c.getTime()+D.value*(1e3*60*60*24));g.value=b.toISOString().split("T")[0]},ee=()=>{const c=new Date(p.value),b=new Date(g.value);D.value=Math.floor((b-c)/(1e3*60*60*24))},te=J(()=>I.value?t.dataPoints.filter(b=>o.value[b.type]):t.dataPoints.filter(b=>new Date(b.date).toISOString().split("T")[0]===g.value).filter(b=>o.value[b.type])),L=de({centralLocation:{latitude:t.centralLocation.latitude,longitude:t.centralLocation.longitude,address:t.centralLocation.address||"Address not found"}}),ae=()=>{x.value=!1,setTimeout(()=>{x.value=!0},0)};t.dataPoints.forEach(c=>{o.value[c.type]||(o.value[c.type]=!0)});const oe=c=>{o.value[c]=!o.value[c]},ne=()=>{l.value?(l.value=!1,a.value=!1,_.value=null,h.value=!0,i.value&&(i.value=null)):(l.value=!0,a.value=!1,_.value=null,h.value=!1)},H=c=>{l.value&&(_.value=c,a.value=!0,L.centralLocation.latitude=c.lat,L.centralLocation.longitude=c.lng,i.value=c,d.value=[c.lat,c.lng])},R=()=>{L.post("/",{preserveScroll:!0,onSuccess:()=>{l.value=!1,a.value=!1,console.log("props.centralLocation:",t.centralLocation),d.value=[t.centralLocation.latitude,t.centralLocation.longitude]}})},G=({lat:c,lng:b,address:F})=>{console.log("Updating center coordinates:",{lat:c,lng:b,address:F}),L.centralLocation.latitude=c,L.centralLocation.longitude=b,L.centralLocation.address=F||"Address not found",H({lat:c,lng:b}),R()};return{filters:o,filteredDataPoints:te,toggleFilter:oe,toggleCenterSelection:ne,setNewCenter:H,submitNewCenter:R,centerSelectionActive:l,centerSelected:a,newCenter:_,form:L,mapCenter:d,cancelNewMarker:h,newMarker:i,showMap:x,reloadMap:ae,selectedDate:g,minDate:p,maxDate:m,daysBetweenMinAndMax:S,updateDateFromSlider:U,updateSliderFromInput:ee,dayOffset:D,showAllDates:I,updateCenterCoordinates:G,displayDataPoint:f,selectedDataPoint:B,handleLoadLocation:c=>{console.log("Loaded location:",c),G({lat:c.latitude,lng:c.longitude,address:c.address})},isAuthenticated:E}}},C=t=>(Q("data-v-7a552fef"),t=t(),K(),t),ua=C(()=>e("title",null,"Home",-1)),_a=C(()=>e("h1",{class:"text-2xl font-bold text-gray-800 text-center"},"The Boston App",-1)),ga=C(()=>e("p",{class:"text-gray-700 mt-4 mt-8 text-lg leading-relaxed text-center"},' This map displays crime, 311 cases, and building permits located within a half mile from the center point. You can choose a new center point by clicking the "Choose New Center" button and then clicking on the map. Click "Save New Center" to update the map. ',-1)),ha={key:0,class:"p-4 bg-gray-100 shadow text-center"},ma=C(()=>e("p",{class:"font-bold text-gray-800"},"Selected Center Coordinates:",-1)),fa={class:"text-gray-700"},ya={key:1,class:"p-4 bg-gray-100 shadow text-center"},xa=C(()=>e("p",{class:"font-bold text-gray-800"},"Current Center Coordinates:",-1)),va={class:"text-gray-700"},ba={class:"flex space-x-4"},wa=["disabled"],pa={key:2,class:"flex space-x-4"},Da={key:3,class:"flex space-x-4"},Pa=C(()=>e("p",{class:"text-gray-700 mt-4 mt-8 text-lg leading-relaxed text-center"}," Log in to save locations ",-1)),Ca=[Pa],Sa={class:"date-filter-container mt-4 mb-4 flex flex-col w-full"},La={class:"flex items-center w-full space-x-4"},ka=C(()=>e("label",{for:"date-range",class:"text-m font-bold w-1/5"},"Filter by Date:",-1)),Aa={class:"w-1/5"},Ma={class:"text-sm p-2 text-left"},Oa=["max","disabled"],Na={class:"w-1/5"},$a={class:"text-sm p-2 text-right"},ja={class:"flex justify-between items-center w-full mt-4 min-[400px]:flex-row flex-col"},Ta=C(()=>e("div",{class:"flex items-center space-x-1 min-[400px]:w-1/3 w-full min-[400px]:justify-end pr-2"},[e("p",{class:"text-sm text-center w-full min-[400px]:text-right"},"Selected:")],-1)),Ia={class:"min-[400px]:w-1/3 w-full"},Ba=["disabled"],Fa={class:"min-[400px]:w-1/3 w-full"},Va={class:"filter-container flex sm:space-x-4 space-x-0"},qa=["onClick"],Ea={class:"invisible md:visible"},Qa=C(()=>e("p",{class:"text-gray-700 mt-4 mb-4 text-lg leading-relaxed"}," Filter by data type by clicking the filter buttons above ",-1));function Ka(t,o,l,a,_,i){const d=w("Head"),h=w("AddressSearch"),x=w("SaveLocation"),g=w("BostonMap"),p=w("ServiceCase"),m=w("Crime"),D=w("BuildingPermit"),I=w("AiAssistant"),B=w("GenericDataList"),E=w("PageTemplate");return s(),P(E,null,{default:Y(()=>[$(d,null,{default:Y(()=>[ua]),_:1}),_a,ga,$(h,{onAddressSelected:a.updateCenterCoordinates},null,8,["onAddressSelected"]),e("form",{onSubmit:o[1]||(o[1]=ue((...f)=>a.submitNewCenter&&a.submitNewCenter(...f),["prevent"])),class:"space-y-4 mb-4"},[a.newCenter?(s(),r("div",ha,[ma,e("p",fa,n(a.newCenter.lat)+", "+n(a.newCenter.lng),1)])):(s(),r("div",ya,[xa,e("p",va,n(l.centralLocation.latitude)+", "+n(l.centralLocation.longitude),1)])),e("div",ba,[e("button",{type:"button",onClick:o[0]||(o[0]=(...f)=>a.toggleCenterSelection&&a.toggleCenterSelection(...f)),class:"px-4 py-2 text-white bg-blue-500 shadow-lg disabled:bg-gray-400 hover:bg-blue-600 transition-colors w-1/2"},n(a.centerSelectionActive?"Cancel":"Choose New Center"),1),e("button",{type:"submit",disabled:!a.centerSelected,class:"px-4 py-2 text-white bg-green-500 disabled:bg-gray-400 hover:bg-green-600 transition-colors w-1/2"}," Select New Center ",8,wa)]),a.isAuthenticated?(s(),r("div",pa,[$(x,{location:a.form.centralLocation,onLoadLocation:a.handleLoadLocation},null,8,["location","onLoadLocation"])])):(s(),r("div",Da,Ca))],32),a.showMap?(s(),P(g,{key:0,dataPoints:a.filteredDataPoints,center:a.mapCenter,centralLocation:l.centralLocation,centerSelectionActive:a.centerSelectionActive,cancelNewMarker:a.cancelNewMarker,onMapClick:a.setNewCenter,onMarkerClick:a.displayDataPoint},null,8,["dataPoints","center","centralLocation","centerSelectionActive","cancelNewMarker","onMapClick","onMarkerClick"])):v("",!0),e("div",null,[e("div",Sa,[e("div",La,[ka,e("div",Aa,[e("p",Ma,n(a.minDate),1)]),j(e("input",{id:"date-range",type:"range",min:0,max:a.daysBetweenMinAndMax,"onUpdate:modelValue":o[2]||(o[2]=f=>a.dayOffset=f),disabled:a.showAllDates,onInput:o[3]||(o[3]=(...f)=>a.updateDateFromSlider&&a.updateDateFromSlider(...f)),class:"w-4/5"},null,40,Oa),[[q,a.dayOffset]]),e("div",Na,[e("p",$a,n(a.maxDate),1)])]),e("div",ja,[Ta,e("div",Ia,[j(e("input",{type:"date","onUpdate:modelValue":o[4]||(o[4]=f=>a.selectedDate=f),disabled:a.showAllDates,onChange:o[5]||(o[5]=(...f)=>a.updateSliderFromInput&&a.updateSliderFromInput(...f)),class:"border w-full min-[400px]:max-w-[200px] p-2",placeholder:"YYYY-MM-DD"},null,40,Ba),[[q,a.selectedDate]])]),e("div",Fa,[e("button",{onClick:o[6]||(o[6]=f=>a.showAllDates=!a.showAllDates),class:"px-4 py-2 text-white bg-blue-500 shadow-lg hover:bg-blue-600 transition-colors w-full"},n(a.showAllDates?"Filter by Date":"Show All Dates"),1)])])]),e("div",Va,[(s(!0),r(M,null,O(a.filters,(f,S)=>(s(),r("button",{key:S,onClick:U=>a.toggleFilter(S),class:z([{active:f,inactive:!f,[`${S.toLowerCase().replace(" ","-").replace(/\d/g,"a")}-filter-button`]:!0},"filter-button px-2 py-2 shadow-lg disabled:bg-gray-400 transition-colors w-1/4 text-base"])},[e("span",Ea,n(S),1)],10,qa))),128)),e("button",{onClick:o[7]||(o[7]=(...f)=>a.reloadMap&&a.reloadMap(...f)),class:"px-4 py-2 text-white bg-red-500 shadow-lg hover:bg-red-600 transition-colors w-1/4"}," Reload Map ")]),Qa]),a.selectedDataPoint&&a.selectedDataPoint.type==="311 Case"?(s(),P(p,{key:1,data:a.selectedDataPoint},null,8,["data"])):v("",!0),a.selectedDataPoint&&a.selectedDataPoint.type==="Crime"?(s(),P(m,{key:2,data:a.selectedDataPoint},null,8,["data"])):v("",!0),a.selectedDataPoint&&a.selectedDataPoint.type==="Building Permit"?(s(),P(D,{key:3,data:a.selectedDataPoint},null,8,["data"])):v("",!0),e("div",null,[$(I,{context:a.filteredDataPoints},null,8,["context"]),$(B,{totalData:a.filteredDataPoints,itemsPerPage:5},null,8,["totalData"])])]),_:1})}const Za=T(da,[["render",Ka],["__scopeId","data-v-7a552fef"]]);export{Za as default};
