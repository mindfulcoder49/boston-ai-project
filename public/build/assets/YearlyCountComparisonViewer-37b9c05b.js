import{m as Y,g as d,z as S,o as a,c as N,w as T,a as $,u as B,Z as F,b as t,d as r,t as n,f as c,F as p,j as g,n as b,e as V}from"./app-59f66305.js";import{_ as j}from"./PageTemplate-06a9faf5.js";import"./NavLink-5e46c6e3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-c41a3cb4.js";const L={class:"container mx-auto p-4 md:p-8"},G={key:0,class:"text-center py-20 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"},I={class:"block sm:inline"},z={key:1,class:"space-y-8"},E={class:"text-center"},P={class:"text-4xl font-bold text-gray-800"},q={class:"text-lg text-gray-500 mt-2"},A={class:"bg-white p-6 rounded-lg shadow-md"},J={class:"text-gray-600"},M={class:"font-medium text-gray-800"},O={class:"font-medium text-gray-800"},U={key:0},Z={class:"bg-white p-6 rounded-lg shadow-md"},H={class:"text-2xl font-semibold mb-2"},K={class:"text-gray-600 mb-4"},Q={class:"font-medium text-gray-800"},R={class:"font-medium text-gray-800"},W={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200"},tt={class:"bg-gray-50"},et={class:"bg-white divide-y divide-gray-200"},st={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ot={key:0},at={class:"font-semibold text-gray-800"},rt={key:1},nt={class:"bg-white p-6 rounded-lg shadow-md mt-8"},lt={class:"text-gray-600 mb-4"},it={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-gray-200"},ut={class:"bg-gray-50"},ct={class:"bg-white divide-y divide-gray-200"},pt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},gt={key:0},_t={class:"font-semibold text-gray-800"},yt={key:1},xt={key:1,class:"text-center py-6 text-gray-500"},wt={__name:"YearlyCountComparisonViewer",props:{jobId:String,apiBaseUrl:String,reportTitle:String,reportData:{type:Object,required:!1,default:null}},setup(_){const y=_,x=Y(null),m=d(()=>{var e;return((e=y.reportData)==null?void 0:e.results)||[]}),f=d(()=>{var e;return((e=y.reportData)==null?void 0:e.all_years)||[]}),i=d(()=>{var e;return((e=y.reportData)==null?void 0:e.parameters)||{}}),w=d(()=>i.value.analysis_to_date_cutoff?new Date(i.value.analysis_to_date_cutoff).toLocaleDateString(void 0,{month:"long",day:"numeric"}):null),k=d(()=>i.value.analysis_to_date_cutoff?new Date(i.value.analysis_to_date_cutoff).toLocaleDateString(void 0,{month:"short",day:"numeric"}):null),h=d(()=>i.value.analysis_current_year),v=d(()=>f.value.filter(e=>e!==h.value));S(()=>{y.reportData||(x.value="Failed to load report data. The analysis results might not be available.")});const C=e=>e>0?"text-red-600":e<0?"text-green-600":"text-gray-500",D=e=>e==null||isNaN(e)?"--":`${e>0?"+":""}${e.toFixed(2)}% YoY`,u=e=>e?{count:e.count.toLocaleString(),change:D(e.change_pct),changeClass:C(e.change_pct)}:{count:"-",change:"--",changeClass:"text-gray-500"};return(e,s)=>(a(),N(j,null,{default:T(()=>[$(B(F),{title:_.reportTitle},null,8,["title"]),t("div",L,[x.value?(a(),r("div",G,[s[0]||(s[0]=t("strong",{class:"font-bold"},"Error!",-1)),t("span",I,n(x.value),1)])):_.reportData?(a(),r("div",z,[t("div",E,[t("h1",P,n(_.reportTitle),1),t("p",q,"Job ID: "+n(_.jobId),1)]),t("div",A,[s[4]||(s[4]=t("h3",{class:"text-2xl font-semibold mb-2"},"Analysis Parameters",-1)),t("p",J,[s[1]||(s[1]=c(" Grouping by: ")),t("strong",M,n(i.value.group_by_col),1),s[2]||(s[2]=c(". Timestamp column: ")),t("strong",O,n(i.value.timestamp_col),1),s[3]||(s[3]=c(". "))])]),m.value.length>0?(a(),r("div",U,[t("div",Z,[t("h3",H,"Year-over-Year Comparison (To "+n(k.value)+")",1),t("p",K,[s[5]||(s[5]=c(" Comparing data up to ")),t("strong",Q,n(w.value),1),s[6]||(s[6]=c(" for each year. Current year is ")),t("strong",R,n(h.value),1),s[7]||(s[7]=c(". "))]),t("div",W,[t("table",X,[t("thead",tt,[t("tr",null,[s[8]||(s[8]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Group",-1)),(a(!0),r(p,null,g(f.value,o=>(a(),r("th",{key:o,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},n(o),1))),128))])]),t("tbody",et,[(a(!0),r(p,null,g(m.value,o=>(a(),r("tr",{key:o.group},[t("td",st,n(o.group),1),(a(!0),r(p,null,g(f.value,l=>(a(),r("td",{key:`${o.group}-${l}-todate`,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},[o.to_date[l]?(a(),r("div",ot,[t("span",at,n(u(o.to_date[l]).count),1),t("span",{class:b([u(o.to_date[l]).changeClass,"block text-xs"])},n(u(o.to_date[l]).change),3)])):(a(),r("span",rt,"-"))]))),128))]))),128))])])])]),t("div",nt,[s[10]||(s[10]=t("h3",{class:"text-2xl font-semibold mb-2"},"Year-over-Year Comparison (Full Years)",-1)),t("p",lt,"Comparing complete calendar years. Current year ("+n(h.value)+") is excluded as it is incomplete.",1),t("div",it,[t("table",dt,[t("thead",ut,[t("tr",null,[s[9]||(s[9]=t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Group",-1)),(a(!0),r(p,null,g(v.value,o=>(a(),r("th",{key:o,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},n(o),1))),128))])]),t("tbody",ct,[(a(!0),r(p,null,g(m.value,o=>(a(),r("tr",{key:o.group},[t("td",pt,n(o.group),1),(a(!0),r(p,null,g(v.value,l=>(a(),r("td",{key:`${o.group}-${l}-fullyear`,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},[o.full_year[l]?(a(),r("div",gt,[t("span",_t,n(u(o.full_year[l]).count),1),t("span",{class:b([u(o.full_year[l]).changeClass,"block text-xs"])},n(u(o.full_year[l]).change),3)])):(a(),r("span",yt,"-"))]))),128))]))),128))])])])])])):(a(),r("div",xt,s[11]||(s[11]=[t("p",null,"No comparison data was found in the analysis results.",-1)])))])):V("",!0)])]),_:1}))}};export{wt as default};
