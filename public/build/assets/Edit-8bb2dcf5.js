import{B as F,m as $,T as U,g as N,o as d,d as u,a as g,u as s,w as b,F as B,Z as j,b as e,t as o,e as y,j as G,f as x,c as z,i as O,s as Y,E as q}from"./app-59f66305.js";import{_ as Z}from"./PageTemplate-06a9faf5.js";import H from"./DeleteUserForm-729eb476.js";import J from"./UpdatePasswordForm-4c250167.js";import Q from"./UpdateProfileInformationForm-e1e8f432.js";import{_ as W,a as X,b as K}from"./TextInput-2e3ba86a.js";import{P as ee}from"./PrimaryButton-815ae13d.js";import"./NavLink-5e46c6e3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-c41a3cb4.js";import"./Modal-65f11932.js";const te={class:"py-12"},ae={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},se={key:0,class:"mb-4 font-medium text-sm text-green-600 bg-green-100 p-3 rounded-md"},oe={key:1,class:"mb-4 font-medium text-sm text-red-600 bg-red-100 p-3 rounded-md"},ne={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},ie={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},le={class:"text-lg font-medium text-gray-900"},re={class:"mt-4 space-y-3"},de={class:"font-medium text-gray-700"},ue={class:"ml-2 text-gray-600 capitalize"},ce=["src"],ge={key:1,class:"ml-2 text-gray-600"},me={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},fe={class:"text-lg font-medium text-gray-900"},Le={key:0},pe={class:"space-y-2"},ye={class:"font-medium text-gray-700"},be={class:"ml-2 text-gray-600 capitalize"},ve={key:0,class:"text-sm text-gray-500"},he={key:1,class:"text-sm text-gray-500"},Ce={class:"font-medium text-gray-700"},_e={class:"ml-2 text-gray-600"},xe={class:"font-medium text-gray-700"},Be={class:"ml-2 text-gray-600"},Se={key:0},we={class:"font-medium text-gray-700"},Te={class:"ml-2 text-gray-600"},Pe={key:1},Ae={class:"font-medium text-gray-700"},ke={class:"ml-2 text-gray-600"},Ee={key:1,class:"mt-4 text-gray-600"},De={class:"mt-6 space-y-4 md:space-y-0 md:flex md:space-x-4"},Ne={class:"mt-8 pt-6 border-t"},Oe={class:"text-lg font-medium text-gray-900"},Ie={class:"flex items-center gap-4"},Ve={key:0,class:"text-sm text-gray-600"},Me={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Re={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Qe={__name:"Edit",props:{mustVerifyEmail:Boolean,status:String,subscriptionsList:Array,socialLoginDetails:Object,errors:Object,status_error:String},setup(n){const S=n,t=F("translations"),w=$(["en-US"]),m=U({redeem_code:""}),I=()=>{m.post(route("profile.redeemCode"),{preserveScroll:!0,onSuccess:()=>{m.reset("redeem_code")},onError:()=>{}})},r=N(()=>t.LabelsByLanguageCode&&t.LabelsByLanguageCode[w.value[0]]?w.value[0]:"en-US"),V=(i,l)=>{var f,L,p;const c=r.value;return i==="basic"?((f=t.LabelsByLanguageCode[c])==null?void 0:f.basicPlanTitle)||l:i==="pro"?((L=t.LabelsByLanguageCode[c])==null?void 0:L.proPlanTitle)||l:i==="free"&&((p=t.LabelsByLanguageCode[c])==null?void 0:p.freeTierTitle)||l},M=i=>{var f,L,p,v,h,a,_,C;const l=r.value;if(!i)return"";const c=i.status;return i.isOnTrial?((f=t.LabelsByLanguageCode[l])==null?void 0:f.statusTrialing)||"Trialing":i.isCancelled&&i.isOnGracePeriod?((L=t.LabelsByLanguageCode[l])==null?void 0:L.statusCanceledOnGrace(i.endsAt))||`Canceled (ends ${i.endsAt})`:i.isCancelled?((p=t.LabelsByLanguageCode[l])==null?void 0:p.statusCanceled)||"Canceled":c==="active"?((v=t.LabelsByLanguageCode[l])==null?void 0:v.statusActive)||"Active":c==="active_manual"?((h=t.LabelsByLanguageCode[l])==null?void 0:h.statusActiveManual)||"Active (Manual)":c==="past_due"?((a=t.LabelsByLanguageCode[l])==null?void 0:a.statusPastDue)||"Past Due":c==="incomplete"?((_=t.LabelsByLanguageCode[l])==null?void 0:_.statusIncomplete)||"Incomplete":c==="free"?((C=t.LabelsByLanguageCode[l])==null?void 0:C.statusFree)||"Free Tier":c};t.LabelsByLanguageCode&&t.LabelsByLanguageCode["en-US"]&&(t.LabelsByLanguageCode["en-US"]={...t.LabelsByLanguageCode["en-US"],profileAccountInfoTitle:"Account Information",profileSocialLoginLabel:"Social Login",profileNoSocialLogin:"Not linked to a social account.",profileSubscriptionsTitle:"Your Subscriptions",profileCurrentPlanLabel:"Plan",profileSubscriptionNameLabel:"Subscription Type",profileSubscriptionStatusLabel:"Status",profileRenewsOnLabel:"Renews on",profileEndsOnLabel:"Ends on",profileTrialEndsOnLabel:"Trial ends on",profileManageBillingButton:"Manage Billing & Subscriptions",profileViewPlansButton:"View Subscription Plans",statusActive:"Active",statusTrialing:"Trialing",statusPastDue:"Past Due",statusCanceled:"Canceled",statusCanceledOnGrace:i=>`Canceled (access until ${i})`,statusIncomplete:"Incomplete",statusFree:"Free Tier",statusActiveManual:"Active (Manually Assigned)",freeTierTitle:"Registered User Features (Free)",basicPlanTitle:"Resident Awareness",proPlanTitle:"Pro Insights",redeemCodeTitle:"Redeem Subscription Code",redeemCodeInputLabel:"Enter Code",redeemCodeButton:"Redeem Code",redeemCodeSuccess:"Code redeemed successfully!",redeemCodeError:"Invalid or expired redemption code."});const R=N(()=>S.subscriptionsList?S.subscriptionsList.some(i=>i.source==="stripe"&&(i.isActive||i.isOnGracePeriod||i.status==="past_due"||i.status==="incomplete")):!1);return(i,l)=>(d(),u(B,null,[g(s(j),{title:"Profile"}),g(Z,null,{header:b(()=>l[1]||(l[1]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Profile",-1)])),default:b(()=>{var c,f,L,p,v,h;return[e("div",te,[e("div",ae,[n.status&&!n.status_error&&!s(m).hasErrors?(d(),u("div",se,o(n.status),1)):y("",!0),n.status_error?(d(),u("div",oe,o(n.status_error),1)):y("",!0),e("div",ne,[g(Q,{"must-verify-email":n.mustVerifyEmail,status:n.status,class:"max-w-xl"},null,8,["must-verify-email","status"])]),e("div",ie,[e("section",null,[e("header",null,[e("h2",le,o(((c=s(t).LabelsByLanguageCode[r.value])==null?void 0:c.profileAccountInfoTitle)||"Account Information"),1)]),e("div",re,[e("div",null,[e("span",de,o(((f=s(t).LabelsByLanguageCode[r.value])==null?void 0:f.profileSocialLoginLabel)||"Social Login")+":",1),n.socialLoginDetails&&n.socialLoginDetails.providerName?(d(),u(B,{key:0},[e("span",ue,o(n.socialLoginDetails.providerName),1),n.socialLoginDetails.providerAvatar?(d(),u("img",{key:0,src:n.socialLoginDetails.providerAvatar,alt:"Avatar",class:"inline-block h-8 w-8 rounded-full ml-2"},null,8,ce)):y("",!0)],64)):(d(),u("span",ge,o(((L=s(t).LabelsByLanguageCode[r.value])==null?void 0:L.profileNoSocialLogin)||"Not linked to a social account."),1))])])])]),e("div",me,[e("section",null,[e("header",null,[e("h2",fe,o(((p=s(t).LabelsByLanguageCode[r.value])==null?void 0:p.profileSubscriptionsTitle)||"Your Subscriptions"),1)]),n.subscriptionsList&&n.subscriptionsList.length>0?(d(),u("div",Le,[(d(!0),u(B,null,G(n.subscriptionsList,(a,_)=>{var C,T,P,A,k,E,D;return d(),u("div",{key:_,class:"mt-4 pt-4 border-t first:border-t-0 first:pt-0"},[e("div",pe,[e("div",null,[e("span",ye,o(((C=s(t).LabelsByLanguageCode[r.value])==null?void 0:C.profileSubscriptionNameLabel)||"Subscription Type")+":",1),e("span",be,[x(o(a.name.replace("_"," "))+" ",1),a.source==="manual"?(d(),u("span",ve,"("+o(((T=s(t).LabelsByLanguageCode[r.value])==null?void 0:T.sourceManual)||"Manual")+")",1)):a.source==="stripe"?(d(),u("span",he,"("+o(((P=s(t).LabelsByLanguageCode[r.value])==null?void 0:P.sourceStripe)||"Stripe")+")",1)):y("",!0)])]),e("div",null,[e("span",Ce,o(((A=s(t).LabelsByLanguageCode[r.value])==null?void 0:A.profileCurrentPlanLabel)||"Plan")+":",1),e("span",_e,o(V(a.planKey,a.planName)),1)]),e("div",null,[e("span",xe,o(((k=s(t).LabelsByLanguageCode[r.value])==null?void 0:k.profileSubscriptionStatusLabel)||"Status")+":",1),e("span",Be,o(M(a)),1)]),a.isOnTrial&&a.trialEndsAt?(d(),u("div",Se,[e("span",we,o(((E=s(t).LabelsByLanguageCode[r.value])==null?void 0:E.profileTrialEndsOnLabel)||"Trial ends on")+":",1),e("span",Te,o(a.trialEndsAt),1)])):y("",!0),a.isActive&&!a.isOnTrial&&!a.isCancelled&&a.currentPeriodEnd?(d(),u("div",Pe,[e("span",Ae,o(((D=s(t).LabelsByLanguageCode[r.value])==null?void 0:D.profileRenewsOnLabel)||"Renews on")+":",1),e("span",ke,o(a.currentPeriodEnd),1)])):y("",!0)])])}),128))])):(d(),u("div",Ee," No subscription details found. ")),e("div",De,[R.value?(d(),z(s(O),{key:0,href:i.route("billing"),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:b(()=>{var a;return[x(o(((a=s(t).LabelsByLanguageCode[r.value])==null?void 0:a.profileManageBillingButton)||"Manage Billing & Subscriptions"),1)]}),_:1},8,["href"])):y("",!0),g(s(O),{href:i.route("subscription.index"),class:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:b(()=>{var a;return[x(o(((a=s(t).LabelsByLanguageCode[r.value])==null?void 0:a.profileViewPlansButton)||"View Subscription Plans"),1)]}),_:1},8,["href"])])]),e("section",Ne,[e("header",null,[e("h2",Oe,o(((v=s(t).LabelsByLanguageCode[r.value])==null?void 0:v.redeemCodeTitle)||"Redeem Subscription Code"),1),l[2]||(l[2]=e("p",{class:"mt-1 text-sm text-gray-600"}," If you have a redemption code, enter it here to update your subscription. ",-1))]),e("form",{onSubmit:Y(I,["prevent"]),class:"mt-6 space-y-6 max-w-xl"},[e("div",null,[g(W,{for:"redeem_code",value:((h=s(t).LabelsByLanguageCode[r.value])==null?void 0:h.redeemCodeInputLabel)||"Enter Code"},null,8,["value"]),g(X,{id:"redeem_code",modelValue:s(m).redeem_code,"onUpdate:modelValue":l[0]||(l[0]=a=>s(m).redeem_code=a),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"off"},null,8,["modelValue"]),g(K,{message:s(m).errors.redeem_code||(n.errors&&n.errors.redeem_code?n.errors.redeem_code[0]:""),class:"mt-2"},null,8,["message"])]),e("div",Ie,[g(ee,{disabled:s(m).processing},{default:b(()=>{var a;return[x(o(((a=s(t).LabelsByLanguageCode[r.value])==null?void 0:a.redeemCodeButton)||"Redeem Code"),1)]}),_:1},8,["disabled"]),g(q,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:b(()=>{var a;return[s(m).recentlySuccessful?(d(),u("p",Ve,o(((a=s(t).LabelsByLanguageCode[r.value])==null?void 0:a.redeemCodeSuccess)||"Code redeemed successfully!"),1)):y("",!0)]}),_:1})])],32)])]),e("div",Me,[g(J,{class:"max-w-xl","has-provider":!!(n.socialLoginDetails&&n.socialLoginDetails.providerName)},null,8,["has-provider"])]),e("div",Re,[g(H,{class:"max-w-xl","has-provider":!!(n.socialLoginDetails&&n.socialLoginDetails.providerName)},null,8,["has-provider"])])])])]}),_:1})],64))}};export{Qe as default};
