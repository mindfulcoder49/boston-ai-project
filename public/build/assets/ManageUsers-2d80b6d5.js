import{A as w}from"./AdminLayout-1b49a627.js";import E from"./EditUserModal-b7ad20a2.js";import{Q as A,m as g,o,c as N,w as h,a as u,u as y,Z as M,b as e,f as c,i as U,d as i,t as s,e as r,F as x,j as m,p as C}from"./app-59f66305.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import"./NavLink-5e46c6e3.js";const $={class:"container mx-auto"},T={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-2"},j={key:0,class:"mb-4 p-4 bg-green-100 text-green-700 rounded-md"},B={key:1,class:"mb-4 p-4 bg-red-100 text-red-700 rounded-md"},D={key:2,class:"space-y-4"},F={class:"flex flex-col sm:flex-row justify-between sm:items-start mb-3"},O=["title"],P=["title"],R={class:"mt-1 sm:mt-0 text-xs font-semibold px-2 py-1 bg-gray-200 text-gray-700 rounded-full self-start sm:self-center"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3 text-sm mb-3"},L={class:"text-gray-800"},G={class:"font-semibold"},J={class:"text-xs text-gray-500"},I={class:"text-xs text-gray-500"},Q={class:"font-semibold"},Z={key:0,class:"text-xs mt-1"},q={class:"text-gray-500"},z={class:"font-semibold"},H={key:0,class:"text-yellow-600"},K={key:1,class:"text-red-600"},W={key:2,class:"text-gray-500"},X={key:3,class:"text-blue-600"},Y={class:"text-xs text-gray-500"},ee={class:"text-xs text-gray-500"},te={class:"md:col-span-2"},se={class:"text-gray-600 block mb-1"},oe={key:0,class:"max-h-24 overflow-y-auto text-xs space-y-1"},ie={class:"list-disc list-inside pl-1"},ae=["title"],le={key:1,class:"text-xs text-gray-500"},ne={class:"md:col-span-2"},de={class:"text-gray-600 block mb-1"},re={key:0,class:"max-h-24 overflow-y-auto text-xs space-y-1"},ce={class:"list-disc list-inside pl-1"},_e=["href","title"],fe={class:"text-gray-500 text-xxs"},ue={key:1,class:"text-xs text-gray-500"},xe={class:"mt-4 flex flex-col sm:flex-row sm:space-x-2 space-y-2 sm:space-y-0"},me=["onClick"],pe=["onClick"],ge={key:3,class:"bg-white shadow-md rounded-lg p-6 text-center"},he={__name:"ManageUsers",props:{users:Array,subscriptionTiers:Array,userRoles:Array},setup(d){const p=A(),_=g(!1),f=g(null),v=n=>{f.value=JSON.parse(JSON.stringify(n)),_.value=!0},b=()=>{_.value=!1,f.value=null},k=n=>{confirm(`Are you sure you want to delete user "${n.name}" (${n.email})? This action cannot be undone and may affect their associated data.`)&&C.delete(route("admin.users.destroy",n.id),{preserveScroll:!0,onSuccess:()=>{p.props.flash.success=`User "${n.name}" deleted successfully.`},onError:a=>{p.props.flash.error=Object.values(a).join(" ")||"Failed to delete user."}})};return(n,a)=>(o(),N(w,null,{default:h(()=>[u(y(M),{title:"Admin - Manage Users"}),e("div",$,[e("div",T,[a[1]||(a[1]=e("h1",{class:"text-2xl font-semibold text-gray-800"},"Manage Users",-1)),u(y(U),{href:n.route("admin.index"),class:"text-sm text-indigo-600 hover:text-indigo-800 self-end sm:self-center"},{default:h(()=>a[0]||(a[0]=[c("â† Back to Admin Dashboard")])),_:1,__:[0]},8,["href"])]),n.$page.props.flash.success?(o(),i("div",j,s(n.$page.props.flash.success),1)):r("",!0),n.$page.props.flash.error?(o(),i("div",B,s(n.$page.props.flash.error),1)):r("",!0),d.users&&d.users.length>0?(o(),i("div",D,[(o(!0),i(x,null,m(d.users,t=>(o(),i("div",{key:t.id,class:"bg-white shadow-md rounded-lg p-4"},[e("div",F,[e("div",null,[e("h2",{class:"text-lg font-semibold text-indigo-700 truncate",title:t.name},s(t.name),9,O),e("p",{class:"text-xs text-gray-500 truncate",title:t.email},s(t.email),9,P)]),e("span",R," Role: "+s(t.role),1)]),e("div",V,[e("div",null,[a[5]||(a[5]=e("strong",{class:"text-gray-600 block"},"Subscription:",-1)),e("p",L,[a[2]||(a[2]=c(" Effective: ")),e("span",G,s(t.effective_tier_details.planName),1),e("span",J," ("+s(t.effective_tier_details.source)+")",1)]),e("p",I,[a[3]||(a[3]=c(" Manual Tier: ")),e("span",Q,s(t.manual_subscription_tier||"None"),1)]),t.effective_tier_details.source==="stripe"?(o(),i("div",Z,[e("p",q,[a[4]||(a[4]=c("Stripe Status: ")),e("span",z,s(t.effective_tier_details.status),1)]),t.effective_tier_details.isOnGracePeriod?(o(),i("p",H,"Ends: "+s(t.effective_tier_details.endsAt)+" (Grace)",1)):t.effective_tier_details.isCancelled&&t.effective_tier_details.endsAt?(o(),i("p",K,"Cancelled, Ends: "+s(t.effective_tier_details.endsAt),1)):t.effective_tier_details.currentPeriodEnd?(o(),i("p",W,"Renews/Ends: "+s(t.effective_tier_details.currentPeriodEnd),1)):r("",!0),t.effective_tier_details.isOnTrial?(o(),i("p",X,"Trial Ends: "+s(t.effective_tier_details.trialEndsAt),1)):r("",!0)])):r("",!0)]),e("div",null,[a[6]||(a[6]=e("strong",{class:"text-gray-600 block"},"Details:",-1)),e("p",Y,"Registered: "+s(t.created_at),1),e("p",ee,"Email Verified: "+s(t.email_verified_at||"No"),1)]),e("div",te,[e("strong",se,"Locations ("+s(t.locations.length)+"):",1),t.locations.length?(o(),i("div",oe,[e("ul",ie,[(o(!0),i(x,null,m(t.locations,l=>(o(),i("li",{key:l.id,class:"truncate",title:l.name+" - "+l.address},s(l.name),9,ae))),128))])])):(o(),i("p",le,"None"))]),e("div",ne,[e("strong",de,"Saved Maps ("+s(t.saved_maps.length)+"):",1),t.saved_maps.length?(o(),i("div",re,[e("ul",ce,[(o(!0),i(x,null,m(t.saved_maps,l=>(o(),i("li",{key:l.id,class:"truncate"},[e("a",{href:l.view_url,target:"_blank",class:"text-indigo-600 hover:underline",title:l.name},s(l.name),9,_e),e("span",fe," ("+s(l.is_public?"Public":"Private")+s(l.is_approved?", Approved":"")+s(l.is_featured?", Featured":"")+")",1)]))),128))])])):(o(),i("p",ue,"None"))])]),e("div",xe,[e("button",{onClick:l=>v(t),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Edit User",8,me),e("button",{onClick:l=>k(t),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},"Delete User",8,pe)])]))),128))])):(o(),i("div",ge,a[7]||(a[7]=[e("p",{class:"text-gray-500"},"No users found.",-1)])))]),u(E,{show:_.value,user:f.value,tiers:d.subscriptionTiers,roles:d.userRoles,onClose:b},null,8,["show","user","tiers","roles"])]),_:1}))}},Ee=S(he,[["__scopeId","data-v-d2320b45"]]);export{Ee as default};
