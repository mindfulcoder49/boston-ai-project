import{m,o as i,c as _,w as y,a as b,u as v,Z as L,b as t,f as o,i as C,t as n,d as r,n as w,e as p,F as N,j as F,s as R,x as S}from"./app-59f66305.js";import{A as I}from"./AdminLayout-1b49a627.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./NavLink-5e46c6e3.js";const j={class:"container mx-auto"},B={class:"mb-6"},E={class:"text-sm text-gray-500 mb-6 break-all"},A={key:0,class:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-6"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 text-sm"},M={class:"break-words"},O={class:"md:col-span-2 break-all"},T={key:1,class:"bg-white shadow-md rounded-lg p-4 sm:p-6"},$={class:"space-y-4"},z={class:"flex flex-col sm:flex-row justify-between sm:items-center mb-2"},J=["title"],Z=["title"],q={class:"text-sm text-gray-700 mb-1"},G={class:"text-sm"},H=["onClick"],K={key:2,class:"bg-white shadow-md rounded-lg p-6"},Q={key:3,class:"bg-white shadow-md rounded-lg p-6"},U={class:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col"},W={class:"flex justify-between items-center p-4 border-b"},X=["title"],Y={class:"p-4 overflow-auto flex-grow text-xs bg-gray-800 text-white rounded-b-lg"},tt={__name:"PipelineFileRunDetail",props:{runDetails:Object,runId:String},setup(s){const h=s,g=m(!1),u=m(""),d=m("Loading log content..."),x=a=>a?new Date(a).toLocaleString():"N/A",c=a=>a==="completed"||a==="success"?"bg-green-100 text-green-800":a==="failed"?"bg-red-100 text-red-800":a==="running"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",D=async a=>{var e;u.value=a,d.value="Loading log content...",g.value=!0;try{const l=await S.get(route("admin.pipeline.fileLogs.commandLogContent",{runId:h.runId,logFileName:a}));d.value=l.data}catch(l){console.error("Error fetching log content:",l),d.value=`Error loading log file: ${((e=l.response)==null?void 0:e.data)||l.message}`}},f=()=>{g.value=!1,u.value="",d.value=""};return(a,e)=>(i(),_(I,null,{default:y(()=>[b(v(L),{title:`Pipeline Run: ${s.runId}`},null,8,["title"]),t("div",j,[t("div",B,[b(v(C),{href:a.route("admin.pipeline.fileLogs.index"),class:"text-indigo-600 hover:text-indigo-800"},{default:y(()=>e[0]||(e[0]=[o("← Back to Pipeline Runs")])),_:1,__:[0]},8,["href"])]),e[14]||(e[14]=t("h1",{class:"text-2xl font-semibold text-gray-800 mb-2 break-words"},"Pipeline Run Details",-1)),t("p",E,"Run ID: "+n(s.runId),1),s.runDetails?(i(),r("div",A,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-gray-700 mb-4"},"Run Summary",-1)),t("div",V,[t("div",null,[e[1]||(e[1]=t("strong",{class:"text-gray-600"},"Name:",-1)),e[2]||(e[2]=o()),t("span",M,n(s.runDetails.name),1)]),t("div",null,[e[3]||(e[3]=t("strong",{class:"text-gray-600"},"Status:",-1)),t("span",{class:w([c(s.runDetails.status),"ml-2 px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full"])},n(s.runDetails.status),3)]),t("div",null,[e[4]||(e[4]=t("strong",{class:"text-gray-600"},"Start Time:",-1)),o(" "+n(x(s.runDetails.start_time)),1)]),t("div",null,[e[5]||(e[5]=t("strong",{class:"text-gray-600"},"End Time:",-1)),o(" "+n(s.runDetails.end_time?x(s.runDetails.end_time):"N/A"),1)]),t("div",O,[e[6]||(e[6]=t("strong",{class:"text-gray-600"},"Summary File:",-1)),o(" "+n(s.runDetails.summary_file_path),1)])])])):p("",!0),s.runDetails&&s.runDetails.commands&&s.runDetails.commands.length>0?(i(),r("div",T,[e[11]||(e[11]=t("h2",{class:"text-xl font-semibold text-gray-700 mb-4"},"Commands Executed",-1)),t("div",$,[(i(!0),r(N,null,F(s.runDetails.commands,(l,k)=>(i(),r("div",{key:k,class:"border border-gray-200 rounded-md p-4"},[t("div",z,[t("h3",{class:"text-md font-semibold text-gray-800 truncate min-w-0",title:l.command_name},n(l.command_name),9,J),t("span",{class:w([c(l.status),"mt-1 sm:mt-0 px-2 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full self-start sm:self-center sm:ml-2"])},n(l.status),3)]),t("div",{class:"text-xs text-gray-500 mb-1 truncate break-all",title:JSON.stringify(l.parameters)},[e[8]||(e[8]=t("strong",{class:"text-gray-600"},"Params:",-1)),o(" "+n(JSON.stringify(l.parameters)),1)],8,Z),t("div",q,[e[9]||(e[9]=t("strong",{class:"text-gray-600"},"Duration:",-1)),o(" "+n(l.duration_seconds)+"s ",1)]),t("div",G,[e[10]||(e[10]=t("strong",{class:"text-gray-600"},"Log File:",-1)),t("button",{onClick:et=>D(l.log_file),class:"ml-1 text-indigo-600 hover:text-indigo-900 underline break-all text-left"},n(l.log_file),9,H)])]))),128))])])):s.runDetails?(i(),r("div",K,e[12]||(e[12]=[t("p",{class:"text-gray-500"},"No commands found for this run.",-1)]))):(i(),r("div",Q,e[13]||(e[13]=[t("p",{class:"text-red-500"},"Could not load run details.",-1)]))),g.value?(i(),r("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4",onClick:R(f,["self"])},[t("div",U,[t("div",W,[t("h3",{class:"text-lg font-semibold truncate min-w-0",title:u.value},"Log: "+n(u.value),9,X),t("button",{onClick:f,class:"text-gray-500 hover:text-gray-700 text-2xl leading-none"},"×")]),t("pre",Y,n(d.value),1)])])):p("",!0)])]),_:1}))}},it=P(tt,[["__scopeId","data-v-05df014a"]]);export{it as default};
