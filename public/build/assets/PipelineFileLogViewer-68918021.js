import{A as h}from"./AdminLayout-1b49a627.js";import{Q as b,o as i,c as w,w as a,a as d,u,Z as _,b as e,f as g,i as c,d as r,t as n,e as p,F as v,j as k,n as D,p as L}from"./app-59f66305.js";import"./NavLink-5e46c6e3.js";import"./_plugin-vue_export-helper-c27b6911.js";const A={class:"container mx-auto"},F={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-2"},N={key:0,class:"mb-4 p-4 bg-green-100 text-green-700 rounded-md"},R={key:1,class:"mb-4 p-4 bg-red-100 text-red-700 rounded-md"},B={key:2,class:"space-y-4"},C={class:"flex flex-col sm:flex-row justify-between sm:items-center mb-3"},V=["title"],$={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm mb-3"},P={class:"text-gray-800"},S={class:"text-gray-800"},T={class:"text-gray-800"},j={class:"mt-4 flex flex-col sm:flex-row sm:space-x-2 space-y-2 sm:space-y-0"},E=["onClick"],z={key:3,class:"bg-white shadow-md rounded-lg p-6 text-center"},H={__name:"PipelineFileLogViewer",props:{pipelineRuns:Array},setup(l){const m=b(),f=s=>s?new Date(s).toLocaleString():"N/A",x=s=>s==="completed"?"bg-green-100 text-green-800":s==="failed"?"bg-red-100 text-red-800":s==="running"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",y=s=>{confirm(`Are you sure you want to delete all logs for run ID: ${s}? This action cannot be undone.`)&&L.delete(route("admin.pipeline.fileLogs.delete",s),{preserveScroll:!0,onSuccess:()=>{m.props.flash.success="Pipeline run logs deleted successfully."},onError:t=>{m.props.flash.error=t.message||"Failed to delete pipeline run logs."}})};return(s,t)=>(i(),w(h,null,{default:a(()=>[d(u(_),{title:"Admin - Pipeline File Logs"}),e("div",A,[e("div",F,[t[1]||(t[1]=e("h1",{class:"text-2xl font-semibold text-gray-800"},"Pipeline Run Logs (File-Based)",-1)),d(u(c),{href:s.route("admin.index"),class:"text-sm text-indigo-600 hover:text-indigo-800 self-end sm:self-center"},{default:a(()=>t[0]||(t[0]=[g("â† Back to Admin Dashboard")])),_:1,__:[0]},8,["href"])]),s.$page.props.flash.success?(i(),r("div",N,n(s.$page.props.flash.success),1)):p("",!0),s.$page.props.flash.error?(i(),r("div",R,n(s.$page.props.flash.error),1)):p("",!0),l.pipelineRuns&&l.pipelineRuns.length>0?(i(),r("div",B,[(i(!0),r(v,null,k(l.pipelineRuns,o=>(i(),r("div",{key:o.run_id,class:"bg-white shadow-md rounded-lg p-4"},[e("div",C,[e("h2",{class:"text-lg font-semibold text-indigo-700 truncate min-w-0 break-all",title:o.run_id},"Run ID: "+n(o.run_id),9,V),e("span",{class:D([x(o.status),"px-2 py-0.5 mt-1 sm:mt-0 inline-flex text-xs leading-5 font-semibold rounded-full self-start sm:self-center sm:ml-2"])},n(o.status),3)]),e("div",$,[e("div",null,[t[2]||(t[2]=e("strong",{class:"text-gray-600"},"Name:",-1)),e("p",P,n(o.name),1)]),e("div",null,[t[3]||(t[3]=e("strong",{class:"text-gray-600"},"Start Time:",-1)),e("p",S,n(f(o.start_time)),1)]),e("div",null,[t[4]||(t[4]=e("strong",{class:"text-gray-600"},"End Time:",-1)),e("p",T,n(f(o.end_time)),1)])]),e("div",j,[d(u(c),{href:s.route("admin.pipeline.fileLogs.show",o.run_id),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:a(()=>t[5]||(t[5]=[g("View Details")])),_:2,__:[5]},1032,["href"]),e("button",{onClick:I=>y(o.run_id),class:"w-full sm:w-auto text-center px-3 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},"Delete",8,E)])]))),128))])):(i(),r("div",z,t[6]||(t[6]=[e("p",{class:"text-gray-500"},"No pipeline runs found in history.",-1)])))])]),_:1}))}};export{H as default};
