import{_ as S}from"./PageTemplate-06a9faf5.js";import{Q as M,m as x,o as r,c as T,w as u,a as p,u as g,Z as P,d as l,b as t,t as n,e as a,F as _,j as w,f as i,i as b,n as V,p as L}from"./app-59f66305.js";import"./NavLink-5e46c6e3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-c41a3cb4.js";const $={key:0,class:"container mx-auto p-4 sm:p-6 lg:p-8"},j={key:0,class:"mb-4 p-4 bg-green-100 text-green-700 rounded-md"},A={key:1,class:"text-gray-600"},F={key:2,class:"space-y-4"},B={class:"flex justify-between items-start"},U={class:"text-xl font-semibold text-indigo-600"},E={key:0,class:"text-sm text-gray-500 mt-1"},G={class:"text-xs text-gray-400 mt-2"},R={class:"font-medium"},z={key:0},N={class:"text-xs text-gray-400"},I={class:"font-medium"},Q={class:"text-xs text-gray-400"},W={class:"flex space-x-2 mt-2 sm:mt-0"},Y=["onClick"],Z={class:"container mx-auto p-4 sm:p-6 lg:p-8 mt-12"},q={class:"mb-6 p-4 sm:p-6 bg-gradient-to-r from-blue-50 via-sky-50 to-indigo-50 border border-blue-200 rounded-lg shadow-sm text-sm"},H={key:0,class:"mt-4 pt-4 border-t border-blue-200"},J={class:"flex flex-col sm:flex-row gap-3 items-center"},K=["href"],O={class:"mt-3 text-xs text-gray-600"},X={key:0,class:"text-gray-600"},ee={key:1,class:"space-y-4"},te={class:"flex justify-between items-start"},se={class:"text-xl font-semibold text-indigo-600"},oe={key:0,class:"text-sm text-gray-500 mt-1"},ie={class:"text-xs text-gray-400 mt-2"},re={class:"font-medium"},le={key:0},ne={class:"text-xs text-gray-400"},ae={class:"font-medium"},de={class:"text-xs text-gray-400"},ue={class:"font-medium"},pe={class:"text-xs text-gray-400"},ge={class:"flex space-x-2 mt-2 sm:mt-0"},me={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50"},ce={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md"},ye={class:"flex justify-end space-x-2 mt-6"},be=["disabled"],we={__name:"UserSavedMapsPage",props:{userSavedMaps:Array,publicSavedMaps:Array},setup(m){M();const c=x(!1),d=x(null),y=x(!1),h=o=>o?o.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"",k=o=>{const e=(o==null?void 0:o.toLowerCase())||"";return e.includes("pro")?"bg-purple-100 text-purple-800":e.includes("basic")?"bg-green-100 text-green-800":e.includes("free")?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"},C=o=>{d.value=o,c.value=!0},D=()=>{d.value&&(y.value=!0,L.delete(route("saved-maps.destroy",d.value.id),{preserveScroll:!0,onSuccess:()=>{c.value=!1,d.value=null},onError:o=>{console.error("Error deleting map:",o),alert("Failed to delete map. Please try again.")},onFinish:()=>{y.value=!1}}))};return(o,e)=>(r(),T(S,null,{default:u(()=>{var v;return[p(g(P),{title:"My Saved Maps"}),o.$page.props.auth.user?(r(),l("div",$,[e[4]||(e[4]=t("h1",{class:"text-2xl font-semibold text-gray-800 mb-6"},"My Saved Maps",-1)),o.$page.props.flash.success?(r(),l("div",j,n(o.$page.props.flash.success),1)):a("",!0),m.userSavedMaps.length===0?(r(),l("div",A," You haven't saved any maps yet. ")):(r(),l("div",F,[(r(!0),l(_,null,w(m.userSavedMaps,s=>(r(),l("div",{key:s.id,class:"bg-white shadow-md rounded-lg p-4 hover:shadow-lg transition-shadow"},[t("div",B,[t("div",null,[t("h2",U,n(s.name),1),s.description?(r(),l("p",E,n(s.description),1)):a("",!0),t("p",G,[e[1]||(e[1]=i(" Type: ")),t("span",R,n(s.map_type==="single"?"Single Data Type":"Combined Data Types"),1),s.map_type==="single"&&s.data_type?(r(),l("span",z," ("+n(h(s.data_type))+")",1)):a("",!0)]),t("p",N,[e[2]||(e[2]=i(" Visibility: ")),t("span",I,n(s.is_public?"Public":"Private"),1)]),t("p",Q,"Saved: "+n(new Date(s.created_at).toLocaleDateString()),1)]),t("div",W,[p(g(b),{href:o.route("saved-maps.view",s.id),class:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600"},{default:u(()=>e[3]||(e[3]=[i("View")])),_:2,__:[3]},1032,["href"]),t("button",{onClick:f=>C(s),class:"px-3 py-1.5 text-sm bg-red-500 text-white rounded-md hover:bg-red-600"},"Delete",8,Y)])])]))),128))]))])):a("",!0),t("div",Z,[e[20]||(e[20]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Public Maps",-1)),t("div",q,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-blue-800 mb-2"},"Discover Community-Crafted Maps!",-1)),e[13]||(e[13]=t("p",{class:"text-blue-700"}," Explore insights shared by our users. The depth of historical data you see in these public maps is determined by the creator's subscription plan: ",-1)),e[14]||(e[14]=t("ul",{class:"list-disc list-inside mt-2 mb-3 text-blue-600 space-y-1 pl-2"},[t("li",null,[t("strong",null,"Pro Insights Users:"),i(" Can share maps with access to the "),t("strong",null,"full available data history"),i(".")]),t("li",null,[t("strong",null,"Resident Awareness Users:"),i(" Can share maps typically showing up to "),t("strong",null,"6 months of data"),i(".")]),t("li",null,[t("strong",null,"Registered Users (Free Tier):"),i(" Can share maps typically showing up to "),t("strong",null,"2 months of data"),i(".")])],-1)),e[15]||(e[15]=t("p",{class:"text-blue-700"}," This means you get richer, more comprehensive views from maps shared by our premium subscribers! ",-1)),o.$page.props.auth.user?a("",!0):(r(),l("div",H,[e[11]||(e[11]=t("p",{class:"font-semibold text-indigo-700 mb-3"},"Want to create and share your own custom maps?",-1)),t("div",J,[t("a",{href:o.route("socialite.redirect","google")+"?redirect_to="+o.route("saved-maps.index"),class:"w-full sm:w-auto flex items-center justify-center px-5 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-medium text-indigo-700 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"},e[5]||(e[5]=[t("img",{class:"h-5 w-5 mr-2",src:"https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg",alt:"Google logo"},null,-1),i(" Login with Google ")]),8,K),e[7]||(e[7]=t("span",{class:"text-gray-500 text-xs hidden sm:inline-block"},"or",-1)),p(g(b),{href:o.route("register")+"?redirect_to="+o.route("saved-maps.index"),class:"w-full sm:w-auto text-center px-5 py-2.5 border border-indigo-300 rounded-md shadow-sm text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"},{default:u(()=>e[6]||(e[6]=[i(" Register Manually ")])),_:1,__:[6]},8,["href"])]),t("p",O,[e[9]||(e[9]=i(" Already have an account? ")),p(g(b),{href:o.route("login")+"?redirect_to="+o.route("saved-maps.index"),class:"font-medium text-indigo-600 hover:text-indigo-500 hover:underline"},{default:u(()=>e[8]||(e[8]=[i("Log in here")])),_:1,__:[8]},8,["href"]),e[10]||(e[10]=i(". "))])]))]),m.publicSavedMaps.length===0?(r(),l("div",X," No public maps are available at the moment. ")):(r(),l("div",ee,[(r(!0),l(_,null,w(m.publicSavedMaps,s=>{var f;return r(),l("div",{key:s.id,class:"bg-white shadow-md rounded-lg p-4 hover:shadow-lg transition-shadow"},[t("div",te,[t("div",null,[t("h2",se,n(s.name),1),s.description?(r(),l("p",oe,n(s.description),1)):a("",!0),t("p",ie,[e[16]||(e[16]=i(" Type: ")),t("span",re,n(s.map_type==="single"?"Single Data Type":"Combined Data Types"),1),s.map_type==="single"&&s.data_type?(r(),l("span",le," ("+n(h(s.data_type))+")",1)):a("",!0)]),t("p",ne,[e[17]||(e[17]=i(" Creator: ")),t("span",ae,n(s.creator_display_name||((f=s.user)==null?void 0:f.name)||"Anonymous"),1),s.creator_tier_display_name?(r(),l("span",{key:0,class:V(["ml-1 px-1.5 py-0.5 rounded-full text-xs",k(s.creator_tier_name)])},n(s.creator_tier_display_name),3)):a("",!0)]),t("p",de,[e[18]||(e[18]=i(" Visibility: ")),t("span",ue,n(s.is_public?"Public":"Private"),1)]),t("p",pe,"Published: "+n(new Date(s.created_at).toLocaleDateString()),1)]),t("div",ge,[p(g(b),{href:o.route("saved-maps.view",s.id),class:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600"},{default:u(()=>e[19]||(e[19]=[i("View")])),_:2,__:[19]},1032,["href"])])])])}),128))]))]),c.value?(r(),l("div",me,[t("div",ce,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold mb-4"},"Confirm Deletion",-1)),t("p",null,[e[21]||(e[21]=i('Are you sure you want to delete the map "')),t("strong",null,n((v=d.value)==null?void 0:v.name),1),e[22]||(e[22]=i('"? This action cannot be undone.'))]),t("div",ye,[t("button",{type:"button",onClick:e[0]||(e[0]=s=>{c.value=!1,d.value=null}),class:"p-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"},"Cancel"),t("button",{onClick:D,disabled:y.value,class:"p-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50"},n(y.value?"Deleting...":"Delete"),9,be)])])])):a("",!0)]}),_:1}))}};export{we as default};
