import{T as E,m as b,q as g,o as a,d as u,b as l,t as d,u as s,s as k,h as r,k as m,e as n,l as y}from"./app-59f66305.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const N={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},z={class:"text-xl font-semibold mb-6"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},C={key:0,class:"text-red-500 text-xs mt-1"},J={key:0,class:"text-red-500 text-xs mt-1"},q={key:0,class:"text-red-500 text-xs mt-1"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},B={key:0,class:"text-red-500 text-xs mt-1"},j={key:0,class:"text-red-500 text-xs mt-1"},L={key:0,class:"text-red-500 text-xs mt-1"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A={key:0,class:"text-red-500 text-xs mt-1"},I={key:0,class:"text-red-500 text-xs mt-1"},P={class:"space-y-3 pt-2"},Z={class:"flex items-center"},G={class:"flex items-center"},H=["disabled"],K={class:"flex items-center"},Q=["disabled"],R={key:0,class:"text-red-500 text-xs mt-1"},W={key:0,class:"text-red-500 text-xs mt-1"},X={key:0,class:"text-red-500 text-xs mt-1"},Y={class:"mt-8 flex justify-end space-x-3"},$=["disabled"],M={__name:"EditMapModal",props:{show:Boolean,map_data:Object},emits:["close"],setup(c,{emit:w}){const v=c,S=w,e=E({name:"",description:"",creator_display_name:"",is_public:!1,is_approved:!1,is_featured:!1,latitude:0,longitude:0,zoom_level:10,slug:"",view_count:0,filters:"",map_settings:"",configurable_filter_fields:""}),p=b(""),f=b(""),_=b("");g(()=>v.map_data,o=>{e.clearErrors(),e.reset(),o?(e.name=o.name||"",e.description=o.description||"",e.creator_display_name=o.creator_display_name||"",e.is_public=o.is_public||!1,e.is_approved=o.is_approved||!1,e.is_featured=o.is_featured||!1,e.latitude=o.latitude||0,e.longitude=o.longitude||0,e.zoom_level=o.zoom_level||10,e.slug=o.slug||"",e.view_count=o.view_count||0,p.value=o.filters?JSON.stringify(o.filters,null,2):"",f.value=o.map_settings?JSON.stringify(o.map_settings,null,2):"",_.value=o.configurable_filter_fields?JSON.stringify(o.configurable_filter_fields,null,2):""):(p.value="",f.value="",_.value="")},{immediate:!0,deep:!0}),g(()=>e.is_public,o=>{o||(e.is_approved=!1,e.is_featured=!1)}),g(()=>e.is_approved,o=>{o||(e.is_featured=!1)});const V=()=>{v.map_data&&(e.filters=p.value,e.map_settings=f.value,e.configurable_filter_fields=_.value,p.value.trim()||e.clearErrors("filters"),f.value.trim()||e.clearErrors("map_settings"),_.value.trim()||e.clearErrors("configurable_filter_fields"),e.put(route("admin.maps.update",v.map_data.id),{preserveScroll:!0,onSuccess:()=>{x()},onError:o=>{console.error("Error updating map:",o)}}))},x=()=>{S("close")};return(o,t)=>c.show?(a(),u("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:k(x,["self"])},[l("div",N,[l("h2",z,"Edit Map: "+d(s(e).name||c.map_data&&c.map_data.name),1),l("form",{onSubmit:k(V,["prevent"]),class:"space-y-4"},[l("div",O,[l("div",null,[t[14]||(t[14]=l("label",{for:"map_name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),r(l("input",{type:"text",id:"map_name","onUpdate:modelValue":t[0]||(t[0]=i=>s(e).name=i),class:"mt-1 block w-full",required:""},null,512),[[m,s(e).name]]),s(e).errors.name?(a(),u("div",C,d(s(e).errors.name),1)):n("",!0)]),l("div",null,[t[15]||(t[15]=l("label",{for:"map_slug",class:"block text-sm font-medium text-gray-700"},"Slug",-1)),r(l("input",{type:"text",id:"map_slug","onUpdate:modelValue":t[1]||(t[1]=i=>s(e).slug=i),class:"mt-1 block w-full"},null,512),[[m,s(e).slug]]),s(e).errors.slug?(a(),u("div",J,d(s(e).errors.slug),1)):n("",!0)])]),l("div",null,[t[16]||(t[16]=l("label",{for:"map_description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),r(l("textarea",{id:"map_description","onUpdate:modelValue":t[2]||(t[2]=i=>s(e).description=i),rows:"3",class:"mt-1 block w-full"},null,512),[[m,s(e).description]]),s(e).errors.description?(a(),u("div",q,d(s(e).errors.description),1)):n("",!0)]),l("div",F,[l("div",null,[t[17]||(t[17]=l("label",{for:"map_latitude",class:"block text-sm font-medium text-gray-700"},"Latitude",-1)),r(l("input",{type:"number",step:"any",id:"map_latitude","onUpdate:modelValue":t[3]||(t[3]=i=>s(e).latitude=i),class:"mt-1 block w-full",required:""},null,512),[[m,s(e).latitude,void 0,{number:!0}]]),s(e).errors.latitude?(a(),u("div",B,d(s(e).errors.latitude),1)):n("",!0)]),l("div",null,[t[18]||(t[18]=l("label",{for:"map_longitude",class:"block text-sm font-medium text-gray-700"},"Longitude",-1)),r(l("input",{type:"number",step:"any",id:"map_longitude","onUpdate:modelValue":t[4]||(t[4]=i=>s(e).longitude=i),class:"mt-1 block w-full",required:""},null,512),[[m,s(e).longitude,void 0,{number:!0}]]),s(e).errors.longitude?(a(),u("div",j,d(s(e).errors.longitude),1)):n("",!0)]),l("div",null,[t[19]||(t[19]=l("label",{for:"map_zoom_level",class:"block text-sm font-medium text-gray-700"},"Zoom Level",-1)),r(l("input",{type:"number",id:"map_zoom_level","onUpdate:modelValue":t[5]||(t[5]=i=>s(e).zoom_level=i),class:"mt-1 block w-full",required:""},null,512),[[m,s(e).zoom_level,void 0,{number:!0}]]),s(e).errors.zoom_level?(a(),u("div",L,d(s(e).errors.zoom_level),1)):n("",!0)])]),l("div",T,[l("div",null,[t[20]||(t[20]=l("label",{for:"map_creator_display_name",class:"block text-sm font-medium text-gray-700"},"Creator Display Name",-1)),r(l("input",{type:"text",id:"map_creator_display_name","onUpdate:modelValue":t[6]||(t[6]=i=>s(e).creator_display_name=i),class:"mt-1 block w-full"},null,512),[[m,s(e).creator_display_name]]),s(e).errors.creator_display_name?(a(),u("div",A,d(s(e).errors.creator_display_name),1)):n("",!0)]),l("div",null,[t[21]||(t[21]=l("label",{for:"map_view_count",class:"block text-sm font-medium text-gray-700"},"View Count",-1)),r(l("input",{type:"number",id:"map_view_count","onUpdate:modelValue":t[7]||(t[7]=i=>s(e).view_count=i),class:"mt-1 block w-full",required:""},null,512),[[m,s(e).view_count,void 0,{number:!0}]]),s(e).errors.view_count?(a(),u("div",I,d(s(e).errors.view_count),1)):n("",!0)])]),l("div",P,[t[25]||(t[25]=l("h3",{class:"text-sm font-medium text-gray-700"},"Status Flags",-1)),l("div",Z,[r(l("input",{id:"is_public","onUpdate:modelValue":t[8]||(t[8]=i=>s(e).is_public=i),type:"checkbox",class:"h-4 w-4"},null,512),[[y,s(e).is_public]]),t[22]||(t[22]=l("label",{for:"is_public",class:"ml-2 block text-sm text-gray-900"},"Public",-1))]),l("div",G,[r(l("input",{id:"is_approved","onUpdate:modelValue":t[9]||(t[9]=i=>s(e).is_approved=i),disabled:!s(e).is_public,type:"checkbox",class:"h-4 w-4"},null,8,H),[[y,s(e).is_approved]]),t[23]||(t[23]=l("label",{for:"is_approved",class:"ml-2 block text-sm text-gray-900"},"Approved",-1))]),l("div",K,[r(l("input",{id:"is_featured","onUpdate:modelValue":t[10]||(t[10]=i=>s(e).is_featured=i),disabled:!s(e).is_public||!s(e).is_approved,type:"checkbox",class:"h-4 w-4"},null,8,Q),[[y,s(e).is_featured]]),t[24]||(t[24]=l("label",{for:"is_featured",class:"ml-2 block text-sm text-gray-900"},"Featured",-1))])]),l("div",null,[t[26]||(t[26]=l("label",{for:"map_filters",class:"block text-sm font-medium text-gray-700"},"Filters JSON",-1)),r(l("textarea",{id:"map_filters","onUpdate:modelValue":t[11]||(t[11]=i=>p.value=i),rows:"3",class:"mt-1 block w-full font-mono text-xs",placeholder:"Enter valid JSON or leave empty"},null,512),[[m,p.value]]),s(e).errors.filters?(a(),u("div",R,d(s(e).errors.filters),1)):n("",!0)]),l("div",null,[t[27]||(t[27]=l("label",{for:"map_settings",class:"block text-sm font-medium text-gray-700"},"Map Settings JSON",-1)),r(l("textarea",{id:"map_settings","onUpdate:modelValue":t[12]||(t[12]=i=>f.value=i),rows:"3",class:"mt-1 block w-full font-mono text-xs",placeholder:"Enter valid JSON or leave empty"},null,512),[[m,f.value]]),s(e).errors.map_settings?(a(),u("div",W,d(s(e).errors.map_settings),1)):n("",!0)]),l("div",null,[t[28]||(t[28]=l("label",{for:"map_configurable_filter_fields",class:"block text-sm font-medium text-gray-700"},"Configurable Filter Fields JSON",-1)),r(l("textarea",{id:"map_configurable_filter_fields","onUpdate:modelValue":t[13]||(t[13]=i=>_.value=i),rows:"3",class:"mt-1 block w-full font-mono text-xs",placeholder:"Enter valid JSON or leave empty"},null,512),[[m,_.value]]),s(e).errors.configurable_filter_fields?(a(),u("div",X,d(s(e).errors.configurable_filter_fields),1)):n("",!0)]),l("div",Y,[l("button",{type:"button",onClick:x,class:"px-4 py-2 btn-secondary"},"Cancel"),l("button",{type:"submit",disabled:s(e).processing,class:"px-4 py-2 btn-primary disabled:opacity-50"},d(s(e).processing?"Saving...":"Save Changes"),9,$)])],32)])])):n("",!0)}},ee=U(M,[["__scopeId","data-v-4f6558e2"]]);export{ee as default};
