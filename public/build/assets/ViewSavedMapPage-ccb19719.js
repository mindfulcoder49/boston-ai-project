import{D as S}from"./DataMapComponent-764d78c9.js";import{C as k}from"./CombinedDataMapComponent-478bf5a1.js";import{_ as T}from"./PageTemplate-06a9faf5.js";import{g,o as a,d as i,b as r,F as _,j as D,t as n,f as M,e as h,Q as w,c as F,w as $,a as u,u as j,Z as C,n as O}from"./app-59f66305.js";import"./MapToolbar.vue_vue_type_style_index_0_scoped_37465a74_lang-6dcbc018.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";import"./SubscriptionBanner.vue_vue_type_style_index_0_scoped_7aa2f15c_lang-67917262.js";import"./AiAssistant-9112a77e.js";import"./index-72ab45cd.js";import"./NavLink-5e46c6e3.js";import"./ResponsiveNavLink-c41a3cb4.js";import"./leaflet-src-10abcd12.js";import"./leaflet.markercluster-src-b6ba4176.js";import"./Modal-65f11932.js";const N={key:0,class:"p-4 border rounded-md shadow-sm bg-gray-50 mb-4"},V={key:0,class:"space-y-3"},B={class:"text-md font-medium text-gray-700"},A={key:0,class:"list-disc list-inside pl-4 text-sm text-gray-600"},L={class:"font-semibold"},I={key:1,class:"text-sm text-gray-500 pl-4"},P={key:1},U={key:0,class:"list-disc list-inside pl-4 text-sm text-gray-600"},q={class:"font-semibold"},E={key:1,class:"text-sm text-gray-500"},z={__name:"SavedFiltersDisplay",props:{filters:{type:Object,required:!0},mapType:{type:String,required:!0},allDataTypeDetails:{type:Object,default:()=>({})}},setup(e){const s=e,v=g(()=>s.filters?Object.keys(s.filters).length>0:!1),b=g(()=>s.mapType==="combined"),d=t=>{var l;return((l=s.allDataTypeDetails[t])==null?void 0:l.modelNameForHumans)||t.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase())},o=t=>t.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),c=t=>Array.isArray(t)?t.join(", "):typeof t=="object"&&t!==null?t.start_date&&t.end_date?`From ${new Date(t.start_date).toLocaleDateString()} to ${new Date(t.end_date).toLocaleDateString()}`:JSON.stringify(t):t;return(t,l)=>v.value?(a(),i("div",N,[l[0]||(l[0]=r("h3",{class:"text-lg font-semibold mb-2"},"Map Filters Applied at Save Time",-1)),b.value?(a(),i("div",V,[(a(!0),i(_,null,D(e.filters,(p,m)=>(a(),i("div",{key:m},[r("h4",B,n(d(m))+" Filters:",1),Object.keys(p).length>0?(a(),i("ul",A,[(a(!0),i(_,null,D(p,(f,y)=>(a(),i("li",{key:y},[r("span",L,n(o(y))+":",1),M(" "+n(c(f)),1)]))),128))])):(a(),i("p",I,"No specific filters saved for this data type."))]))),128))])):(a(),i("div",P,[Object.keys(e.filters).length>0?(a(),i("ul",U,[(a(!0),i(_,null,D(e.filters,(p,m)=>(a(),i("li",{key:m},[r("span",q,n(o(m))+":",1),M(" "+n(c(p)),1)]))),128))])):(a(),i("p",E,"No specific filters saved for this map."))]))])):h("",!0)}},H=x(z,[["__scopeId","data-v-45a4870d"]]);const J={class:"p-4"},K={class:"mb-4"},Q={class:"text-3xl font-bold"},R={key:0,class:"text-gray-600 mt-1"},Z={class:"text-sm text-gray-500 mt-2"},G={class:"font-semibold"},W={class:"text-sm text-gray-500"},X={key:0},Y={key:1},ee={key:2,class:"text-red-500 p-4"},te={__name:"ViewSavedMapPage",props:{savedMap:Object,mapDataSets:Object,allDataTypeDetails:Object,mapSettings:Object,isReadOnly:Boolean,modelMapping:Object},setup(e){const s=e,v=w();g(()=>v.props),g(()=>{var d;return s.savedMap.creator_display_name||((d=s.savedMap.user)==null?void 0:d.name)||"Anonymous"});const b=()=>{var d,o,c;if(s.savedMap.map_type==="combined"){if((d=s.mapSettings)!=null&&d.active_filter_tab&&s.allDataTypeDetails[s.mapSettings.active_filter_tab])return s.mapSettings.active_filter_tab;if(((c=(o=s.mapSettings)==null?void 0:o.selected_data_types)==null?void 0:c.length)>0&&s.allDataTypeDetails[s.mapSettings.selected_data_types[0]])return s.mapSettings.selected_data_types[0];const t=Object.keys(s.allDataTypeDetails||{});if(t.length>0)return t[0]}return null};return(d,o)=>(a(),F(T,null,{default:$(()=>{var c,t,l,p,m,f,y;return[u(j(C),{title:`View Map: ${e.savedMap.name}`},null,8,["title"]),r("div",J,[u(H,{filters:e.savedMap.filters,"map-type":e.savedMap.map_type,"all-data-type-details":e.allDataTypeDetails},null,8,["filters","map-type","all-data-type-details"]),r("div",K,[r("h1",Q,n(e.savedMap.name),1),e.savedMap.description?(a(),i("p",R,n(e.savedMap.description),1)):h("",!0),r("p",Z,[o[0]||(o[0]=M(" Created by: ")),r("span",G,n(e.savedMap.creator_display_name||((c=e.savedMap.user)==null?void 0:c.name)||"Anonymous"),1),(t=e.savedMap.user)!=null&&t.creator_tier_display_name?(a(),i("span",{key:0,class:O(["ml-2 px-2 py-0.5 text-xs rounded-full",d.getTierBadgeClass((l=e.savedMap.user)==null?void 0:l.creator_tier_name)])},n(e.savedMap.user.creator_tier_display_name),3)):h("",!0)]),r("p",W,"Last updated: "+n(new Date(e.savedMap.updated_at).toLocaleDateString()),1)]),e.savedMap.map_type==="single"?(a(),i("div",X,[u(S,{"initial-data-prop":e.mapDataSets[e.savedMap.data_type]||[],"page-filters-prop":e.savedMap.filters,"data-type-prop":e.savedMap.data_type,"date-field-prop":(p=e.allDataTypeDetails[e.savedMap.data_type])==null?void 0:p.dateField,"external-id-field-prop":(m=e.allDataTypeDetails[e.savedMap.data_type])==null?void 0:m.externalIdField,"filter-fields-description-prop":(f=e.allDataTypeDetails[e.savedMap.data_type])==null?void 0:f.filterFieldsDescription,"searchable-columns-prop":((y=e.allDataTypeDetails[e.savedMap.data_type])==null?void 0:y.searchableColumns)||[],"is-read-only":!0,"initial-map-settings":e.mapSettings,"configurable-filter-fields-for-view":e.savedMap.configurable_filter_fields},null,8,["initial-data-prop","page-filters-prop","data-type-prop","date-field-prop","external-id-field-prop","filter-fields-description-prop","searchable-columns-prop","initial-map-settings","configurable-filter-fields-for-view"])])):e.savedMap.map_type==="combined"?(a(),i("div",Y,[u(k,{"model-mapping-prop":s.modelMapping,"initial-data-type-prop":b(),"initial-data-sets-prop":e.mapDataSets,"initial-filters-prop":e.savedMap.filters,"all-data-type-details-prop":e.allDataTypeDetails,"is-read-only":!0,"initial-map-settings":e.mapSettings,"configurable-filter-fields-for-view":e.savedMap.configurable_filter_fields},null,8,["model-mapping-prop","initial-data-type-prop","initial-data-sets-prop","initial-filters-prop","all-data-type-details-prop","initial-map-settings","configurable-filter-fields-for-view"])])):(a(),i("div",ee," Error: Unknown map type. "))])]}),_:1}))}},ge=x(te,[["__scopeId","data-v-d62bcbac"]]);export{ge as default};
