import{Q as E,m as U,T as M,g as N,q as P,o as i,d as l,b as s,t as a,s as k,h as u,k as p,u as r,e as n,v as b,F as g,j as w}from"./app-59f66305.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const A={class:"bg-white p-6 rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] overflow-y-auto"},j={class:"text-xl font-semibold mb-6"},B={key:0,class:"text-red-500 text-xs mt-1"},I=["disabled"],q={key:0,class:"text-red-500 text-xs mt-1"},F={key:1,class:"text-xs text-gray-500 mt-1"},T=["disabled"],L=["value"],z={key:0,class:"text-red-500 text-xs mt-1"},K={key:1,class:"text-xs text-gray-500 mt-1"},Q=["value"],R={key:0,class:"text-red-500 text-xs mt-1"},$={key:0,class:"text-red-500 text-xs mt-1"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={key:0,class:"text-red-500 text-xs mt-1"},J={key:0,class:"text-red-500 text-xs mt-1"},W={class:"text-xs text-gray-600 mb-2"},X={key:0,class:"text-red-500 text-xs mt-1"},Y={class:"mt-8 flex justify-end space-x-3"},Z=["disabled"],h={__name:"EditUserModal",props:{show:Boolean,user:Object,tiers:Array,roles:Array},emits:["close"],setup(f,{emit:V}){const m=f,C=V,x=E(),_=U(""),t=M({name:"",email:"",role:"user",manual_subscription_tier:null,password:"",password_confirmation:"",provider_name:"",provider_id:"",email_verified_at_action:"keep"}),v=N(()=>m.user&&x.props.auth.user.id===m.user.id&&x.props.auth.user.email===x.props.config.admin_email);P(()=>m.user,d=>{d&&(_.value=d.name,t.name=d.name,t.email=d.email,t.role=d.role||"user",t.manual_subscription_tier=d.manual_subscription_tier,t.provider_name=d.provider_name,t.provider_id=d.provider_id,t.password="",t.password_confirmation="",t.email_verified_at_action="keep",t.errors={})},{immediate:!0,deep:!0});const S=()=>{m.user&&t.put(route("admin.users.update",m.user.id),{preserveScroll:!0,onSuccess:()=>{c()},onError:d=>{console.error("Error updating user:",d)}})},c=()=>{C("close"),t.reset(),t.clearErrors(),_.value=""};return(d,e)=>{var y;return f.show?(i(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:k(c,["self"])},[s("div",A,[s("h2",j,"Edit User: "+a(_.value),1),s("form",{onSubmit:k(S,["prevent"]),class:"space-y-4"},[s("div",null,[e[9]||(e[9]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),u(s("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>r(t).name=o),class:"mt-1 block w-full input-field",required:""},null,512),[[p,r(t).name]]),r(t).errors.name?(i(),l("div",B,a(r(t).errors.name),1)):n("",!0)]),s("div",null,[e[10]||(e[10]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),u(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>r(t).email=o),class:"mt-1 block w-full input-field",disabled:v.value,required:""},null,8,I),[[p,r(t).email]]),r(t).errors.email?(i(),l("div",q,a(r(t).errors.email),1)):n("",!0),v.value?(i(),l("p",F,"Primary admin email cannot be changed here.")):n("",!0)]),s("div",null,[e[11]||(e[11]=s("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Role",-1)),u(s("select",{id:"role","onUpdate:modelValue":e[2]||(e[2]=o=>r(t).role=o),class:"mt-1 block w-full input-field",disabled:v.value},[(i(!0),l(g,null,w(f.roles,o=>(i(),l("option",{key:o,value:o},a(o.charAt(0).toUpperCase()+o.slice(1)),9,L))),128))],8,T),[[b,r(t).role]]),r(t).errors.role?(i(),l("div",z,a(r(t).errors.role),1)):n("",!0),v.value?(i(),l("p",K,"Primary admin role cannot be changed here.")):n("",!0)]),s("div",null,[e[13]||(e[13]=s("label",{for:"manual_subscription_tier",class:"block text-sm font-medium text-gray-700"},"Manual Subscription Tier",-1)),u(s("select",{id:"manual_subscription_tier","onUpdate:modelValue":e[3]||(e[3]=o=>r(t).manual_subscription_tier=o),class:"mt-1 block w-full input-field"},[e[12]||(e[12]=s("option",{value:null},"None (Use Stripe/Default)",-1)),(i(!0),l(g,null,w(f.tiers,o=>(i(),l("option",{key:o,value:o},a(o.charAt(0).toUpperCase()+o.slice(1)),9,Q))),128))],512),[[b,r(t).manual_subscription_tier]]),r(t).errors.manual_subscription_tier?(i(),l("div",R,a(r(t).errors.manual_subscription_tier),1)):n("",!0)]),e[20]||(e[20]=s("hr",{class:"my-6"},null,-1)),e[21]||(e[21]=s("h3",{class:"text-md font-semibold text-gray-700"},"Change Password (Optional)",-1)),s("div",null,[e[14]||(e[14]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"New Password",-1)),u(s("input",{type:"password",id:"password","onUpdate:modelValue":e[4]||(e[4]=o=>r(t).password=o),class:"mt-1 block w-full input-field",autocomplete:"new-password"},null,512),[[p,r(t).password]]),r(t).errors.password?(i(),l("div",$,a(r(t).errors.password),1)):n("",!0)]),s("div",null,[e[15]||(e[15]=s("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"},"Confirm New Password",-1)),u(s("input",{type:"password",id:"password_confirmation","onUpdate:modelValue":e[5]||(e[5]=o=>r(t).password_confirmation=o),class:"mt-1 block w-full input-field",autocomplete:"new-password"},null,512),[[p,r(t).password_confirmation]])]),e[22]||(e[22]=s("hr",{class:"my-6"},null,-1)),e[23]||(e[23]=s("h3",{class:"text-md font-semibold text-gray-700"},"Provider Information (Informational/Correction)",-1)),s("div",G,[s("div",null,[e[16]||(e[16]=s("label",{for:"provider_name",class:"block text-sm font-medium text-gray-700"},"Provider Name",-1)),u(s("input",{type:"text",id:"provider_name","onUpdate:modelValue":e[6]||(e[6]=o=>r(t).provider_name=o),class:"mt-1 block w-full input-field"},null,512),[[p,r(t).provider_name]]),r(t).errors.provider_name?(i(),l("div",H,a(r(t).errors.provider_name),1)):n("",!0)]),s("div",null,[e[17]||(e[17]=s("label",{for:"provider_id",class:"block text-sm font-medium text-gray-700"},"Provider ID",-1)),u(s("input",{type:"text",id:"provider_id","onUpdate:modelValue":e[7]||(e[7]=o=>r(t).provider_id=o),class:"mt-1 block w-full input-field"},null,512),[[p,r(t).provider_id]]),r(t).errors.provider_id?(i(),l("div",J,a(r(t).errors.provider_id),1)):n("",!0)])]),e[24]||(e[24]=s("hr",{class:"my-6"},null,-1)),e[25]||(e[25]=s("h3",{class:"text-md font-semibold text-gray-700"},"Email Verification",-1)),s("p",W,"Current status: "+a((y=m.user)!=null&&y.email_verified_at?`Verified on ${new Date(m.user.email_verified_at).toLocaleDateString()}`:"Not Verified"),1),s("div",null,[e[19]||(e[19]=s("label",{for:"email_verified_at_action",class:"block text-sm font-medium text-gray-700"},"Action",-1)),u(s("select",{id:"email_verified_at_action","onUpdate:modelValue":e[8]||(e[8]=o=>r(t).email_verified_at_action=o),class:"mt-1 block w-full input-field"},e[18]||(e[18]=[s("option",{value:"keep"},"Keep Current Status",-1),s("option",{value:"verify"},"Mark as Verified",-1),s("option",{value:"unverify"},"Mark as Unverified",-1)]),512),[[b,r(t).email_verified_at_action]]),r(t).errors.email_verified_at_action?(i(),l("div",X,a(r(t).errors.email_verified_at_action),1)):n("",!0)]),s("div",Y,[s("button",{type:"button",onClick:c,class:"px-4 py-2 btn-secondary"},"Cancel"),s("button",{type:"submit",disabled:r(t).processing,class:"px-4 py-2 btn-primary disabled:opacity-50"},a(r(t).processing?"Saving...":"Save Changes"),9,Z)])],32)])])):n("",!0)}}},te=D(h,[["__scopeId","data-v-0608032b"]]);export{te as default};
